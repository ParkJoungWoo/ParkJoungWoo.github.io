<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/feed.xml" rel="self" type="application/atom+xml" /><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/" rel="alternate" type="text/html" /><updated>2023-01-27T05:57:03+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/feed.xml</id><title type="html">ì •ìš°ì˜ ë¸”ë¡œê·¸</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><author><name>ë°•ì •ìš°</name></author><entry><title type="html">Spring security 2í¸</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/27/cotatoStudy8.html" rel="alternate" type="text/html" title="Spring security 2í¸" /><published>2023-01-27T00:00:00+00:00</published><updated>2023-01-27T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/27/cotatoStudy8</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/27/cotatoStudy8.html"><![CDATA[<p>âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤</code>ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>

<h2 id="5ì¥-ìŠ¤í”„ë§-ì‹œíë¦¬í‹°">5ì¥ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</h2>

<h3 id="ì§€ë‚œ-ì‹œê°„ì—”">ì§€ë‚œ ì‹œê°„ì—”â€¦</h3>

<ol>
  <li>ì´ ì„œë¹„ìŠ¤ëŠ” ìœ ì €ê°€ ê²Œì‹œë¬¼ì„ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.</li>
  <li>ìœ ì €ëŠ” ì•„ì´ë””, ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„ìœ¼ë¡œ êµ¬ë³„ëœë‹¤.</li>
  <li>OAuthë¥¼ í†µí•´ ë¡œê·¸ì¸ ê³¼ì •ì„ Google, Naverì— ìœ„ì„í•œë‹¤.</li>
  <li>ì‚¬ìš©ìì˜ status(Role)ì— ë”°ë¼ ê¸°ëŠ¥ì´ ì œí•œëœë‹¤.</li>
</ol>

<p>ìœ„ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ê°€ì§„ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>

<p>ë˜í•œ ì¸ì¦, ì¸ê°€ì— ê´€ë ¨ëœ ê¸°ëŠ¥ì€ Spring Securityì˜ ë„ì›€ì„ ë°›ìœ¼ë ¤ê³  í•©ë‹ˆë‹¤.</p>

<h3 id="entityê°€-ìˆìœ¼ë©´">Entityê°€ ìˆìœ¼ë©´?</h3>

<p>ì €ë²ˆ ì‹œê°„ì— ë§Œë“  User í´ë˜ìŠ¤ëŠ” Entityí´ë˜ìŠ¤ ì…ë‹ˆë‹¤.</p>

<iframe src="https://giphy.com/embed/M1VL81pAxfj3y" width="480" height="343" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe>
<p><a href="https://giphy.com/gifs/anthony-cheating-carmelo-M1VL81pAxfj3y">via GIPHY</a></p>

<p>Entity í´ë˜ìŠ¤ê°€ ìˆë‹¤ë©´ ê·¸ ì •ë³´ë¥¼ ì†¡ìˆ˜ì‹  í•˜ê¸° ìœ„í•œ DTO í´ë˜ìŠ¤ë„ í•„ìš”í•©ë‹ˆë‹¤. ë˜í•œ ì €ì¥ì†Œì—ì„œ User í´ë˜ìŠ¤ë¥¼ CRUDí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Repository Classë„ í•„ìš”í•©ë‹ˆë‹¤.</p>

<h3 id="ì˜ì¡´ì„±-ì¶”ê°€í•˜ê¸°">ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°</h3>
<p>ì‹¤ì§ˆì ìœ¼ë¡œ Google OAuth2 ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ëŠ” ëœ»ì€ ë‹¤ì‹œ ë§í•˜ë©´ ê¸°ëŠ¥ ì‚¬ìš©ì„ ìœ„í•œ ì˜ì¡´ì„±ì´ í•„ìš”í•˜ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>implementation('org.springframework.boot:spring-boot-starter-oauth2-client')
</code></pre></div></div>
<p>ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ ì¤ì‹œë‹¤.</p>

<h3 id="customizing">Customizing</h3>
<p>ì €ë²ˆ ì‹œê°„ì— ì„¤ëª…í•œ Spring Securityì˜ ì¥ì ì€ <code class="language-plaintext highlighter-rouge">ì»¤ìŠ¤í„° ë§ˆì´ì§•</code>ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ ë‚˜ì˜ Spring í”„ë¡œì íŠ¸ì— ëŒ€í•œ Spring Security ì„¤ì •ì„ ì‚¬ìš©ì ì •ì˜ëŒ€ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •ì„ ìœ„í•´ì„œëŠ”
WebSecurityConfigurerAdapterë¼ëŠ” WebSecurityConfigurerë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.

WebSecurityConfigurerëŠ” WebSecurityë¥¼ Customí•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.

WebSecurityëŠ” SpringSecurity, Filter Chain(DelegatingFilterProxy)ì„ ìƒì„±í•©ë‹ˆë‹¤..
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ ìš”ì†Œë³„ë¡œ ì•Œì•„ë³´ëŠ” ê²ƒì€ ë…¼ì§€ì™€ ë²—ì–´ë‚˜ê³  ì§€ê¸ˆì€ Springì˜ ìˆ²ì„ ë³´ëŠ” ê³¼ì •ì´ê¸° ë•Œë¬¸ì— ìš°ì„ ì€ <code class="language-plaintext highlighter-rouge">Spring Securityë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤</code>ë¼ê³  ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="kd">extends</span> <span class="nc">WebSecurityConfigurerAdapter</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CustomOAuth2UserService</span>  <span class="n">customOAuth2UserService</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">http</span><span class="o">.</span><span class="na">csrf</span><span class="o">().</span><span class="na">disable</span><span class="o">()</span>
                <span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">frameOptions</span><span class="o">().</span><span class="na">disable</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="s">"/css/**"</span><span class="o">,</span> <span class="s">"/images/**"</span><span class="o">,</span> <span class="s">"/js/**"</span><span class="o">,</span> <span class="s">"/h2-console/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/api/v1/**"</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="nc">Role</span><span class="o">.</span><span class="na">USER</span><span class="o">.</span><span class="na">name</span><span class="o">())</span>
                    <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">logout</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">logoutSuccessUrl</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">oauth2Login</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">userInfoEndpoint</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">userService</span><span class="o">(</span><span class="n">customOAuth2UserService</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì—¬ê¸°ì—ì„œ ì£¼ëª©í•´ì•¼í•  ì ì„ í¬ê²Œ 3ê°€ì§€ë¡œ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<ul>
  <li>ê³µê²© ë° ê¶Œí•œ</li>
</ul>

<p>ìœ„ í´ë˜ìŠ¤ëŠ” HttpSecurityë¼ëŠ” httpê´€ë ¨ ì„¤ì • ê°ì²´ë¥¼ ì„¤ì •ì„ í•©ë‹ˆë‹¤.</p>

<p>h2-consoleì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— csrf(ì‚¬ì´íŠ¸ ê°„ ìš”ì²­ ìœ„ì¡°)ë°©ì§€ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë˜í•œ headers().frameOptions()-(X-Frame-Options Click jacking)ë°©ì§€ ì˜µì…˜ì„ ëª¨ë‘ disableí™” í•©ë‹ˆë‹¤.</p>

<ul>
  <li>ë¡œê·¸ì•„ì›ƒì„ í–ˆì„ ê²½ìš° â€œ/â€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ì¸ì´ ì„±ê³µí•œ ê²½ìš° oauth2Login()ì„ ê±°ì³ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•˜ê³  customOAuth2UserService ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.)</li>
</ul>

<h3 id="ì»¤ìŠ¤í…€-oauth-ì„œë¹„ìŠ¤-ì •ì˜í•˜ê¸°">ì»¤ìŠ¤í…€ OAuth ì„œë¹„ìŠ¤ ì •ì˜í•˜ê¸°</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ”ï¸ì‚¬ìš©ì Entity ì •ì˜í•˜ê¸°
âœ”ï¸Spring Security ê¶Œí•œ(Role) ì •ì˜í•˜ê¸°
âœ”ï¸Spring Security Config
âOAuth2ì„œë¹„ìŠ¤ ì •ì˜
âí™”ë©´êµ¬í˜„í•˜ê¸°
</code></pre></div></div>
<p>ì´ì œ ìŠ¤í”„ë§ì— ëŒ€í•œ ì„¤ì •ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<p>ê·¸ë ‡ë‹¤ë©´ êµ¬ê¸€ì—ì„œ OAuthë¡œ íšŒì› ì •ë³´ë¥¼ ë°›ì€ ì´í›„ ì„¸ì…˜ ì €ì¥, ì €ì¥ì†Œì— íšŒì›ì •ë³´ ë“±ë¡ ë“± OAuthì™€ ê´€ë ¨ëœ ì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomOAuth2UserService</span> <span class="kd">implements</span> <span class="nc">OAuth2UserService</span><span class="o">&lt;</span><span class="nc">OAuth2UserRequest</span><span class="o">,</span> <span class="nc">OAuth2User</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">HttpSession</span> <span class="n">httpSession</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">OAuth2User</span> <span class="nf">loadUser</span><span class="o">(</span><span class="nc">OAuth2UserRequest</span> <span class="n">userRequest</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">OAuth2AuthenticationException</span> <span class="o">{</span>
        <span class="nc">OAuth2UserService</span><span class="o">&lt;</span><span class="nc">OAuth2UserRequest</span><span class="o">,</span> <span class="nc">OAuth2User</span><span class="o">&gt;</span> <span class="n">delegate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultOAuth2UserService</span><span class="o">();</span>
        <span class="nc">OAuth2User</span> <span class="n">oAuth2User</span> <span class="o">=</span> <span class="n">delegate</span><span class="o">.</span><span class="na">loadUser</span><span class="o">(</span><span class="n">userRequest</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">registrationId</span> <span class="o">=</span> <span class="n">userRequest</span><span class="o">.</span><span class="na">getClientRegistration</span><span class="o">().</span><span class="na">getRegistrationId</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">userNameAttributeName</span> <span class="o">=</span> <span class="n">userRequest</span><span class="o">.</span><span class="na">getClientRegistration</span><span class="o">()</span>
            <span class="o">.</span><span class="na">getProviderDetails</span><span class="o">()</span>
            <span class="o">.</span><span class="na">getUserInfoEndpoint</span><span class="o">()</span>
            <span class="o">.</span><span class="na">getUserNameAttributeName</span><span class="o">();</span>
        <span class="nc">OAuthAttributes</span> <span class="n">attributes</span> <span class="o">=</span> <span class="nc">OAuthAttributes</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">registrationId</span><span class="o">,</span> <span class="n">userNameAttributeName</span><span class="o">,</span> <span class="n">oAuth2User</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">());</span>

        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">saveOrUpdate</span><span class="o">(</span><span class="n">attributes</span><span class="o">);</span>
        <span class="n">httpSession</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">SessionUser</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">DefaultOAuth2User</span><span class="o">(</span>
            <span class="nc">Collections</span><span class="o">.</span><span class="na">singleton</span><span class="o">(</span>
                <span class="k">new</span> <span class="nf">SimpleGrantedAuthority</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getRoleKey</span><span class="o">())),</span>
                <span class="n">attributes</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">(),</span>
                <span class="n">attributes</span><span class="o">.</span><span class="na">getNameAttributeKey</span><span class="o">());</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">User</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="nc">OAuthAttributes</span> <span class="n">attributes</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span>
            <span class="n">attributes</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
        <span class="o">.</span><span class="na">map</span><span class="o">(</span>
            <span class="n">entity</span> <span class="o">-&gt;</span> <span class="n">entity</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">attributes</span><span class="o">.</span><span class="na">getPicture</span><span class="o">()))</span>
            <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">toEntity</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì½”ë“œê°€ ê¸¸ì§€ë§Œ ëœ¯ì–´ ë³´ë©´ì„œ í™•ì¸í•´ë´…ì‹œë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomOAuth2UserService</span> <span class="kd">implements</span> <span class="nc">OAuth2UserService</span><span class="o">&lt;</span><span class="nc">OAuth2UserRequest</span><span class="o">,</span> <span class="nc">OAuth2User</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">HttpSession</span> <span class="n">httpSession</span><span class="o">;</span>
    <span class="o">...</span>
</code></pre></div></div>

<ol>
  <li>í˜„ì¬ ì‘ì„±í•˜ê³  ìˆëŠ” ê¸°ëŠ¥ì€ ì„œë¹„ìŠ¤ì´ê¸° ë•Œë¬¸ì— @Service ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤ë‹ˆë‹¤.</li>
  <li>ë˜í•œ ìŠ¤í”„ë§ì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¡œ OAuthì„œë¹„ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ìˆê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">OAuth2UserService</code>ë¥¼ implementsí•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>ìœ ì €ì˜ ì •ë³´ë¥¼ DBì— ì €ì¥í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Repositoryë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</li>
  <li>Session ë°©ì‹ìœ¼ë¡œ íšŒì›ì˜ ì •ë³´ë¥¼ ì ‘ê·¼í•˜ê¸° ìœ„í•´ HttpSession ë˜í•œ ë“±ë¡í•©ë‹ˆë‹¤.</li>
</ol>

<p>-&gt; <em>ì´ì œ íšŒì› ì •ë³´ë¥¼ DBì— ì €ì¥í•  ìˆ˜ ìˆê³  Sessionì—ì„œ íšŒì› ì •ë³´ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</em></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">OAuth2User</span> <span class="nf">loadUser</span><span class="o">(</span><span class="nc">OAuth2UserRequest</span> <span class="n">userRequest</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">OAuth2AuthenticationException</span> <span class="o">{</span>
    <span class="nc">OAuth2UserService</span><span class="o">&lt;</span><span class="nc">OAuth2UserRequest</span><span class="o">,</span> <span class="nc">OAuth2User</span><span class="o">&gt;</span> <span class="n">delegate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultOAuth2UserService</span><span class="o">();</span>
    <span class="nc">OAuth2User</span> <span class="n">oAuth2User</span> <span class="o">=</span> <span class="n">delegate</span><span class="o">.</span><span class="na">loadUser</span><span class="o">(</span><span class="n">userRequest</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">registrationId</span> <span class="o">=</span> <span class="n">userRequest</span><span class="o">.</span><span class="na">getClientRegistration</span><span class="o">().</span><span class="na">getRegistrationId</span><span class="o">();</span>
    <span class="nc">String</span> <span class="n">userNameAttributeName</span> <span class="o">=</span> <span class="n">userRequest</span><span class="o">.</span><span class="na">getClientRegistration</span><span class="o">()</span>
        <span class="o">.</span><span class="na">getProviderDetails</span><span class="o">()</span>
        <span class="o">.</span><span class="na">getUserInfoEndpoint</span><span class="o">()</span>
        <span class="o">.</span><span class="na">getUserNameAttributeName</span><span class="o">();</span>
    <span class="nc">OAuthAttributes</span> <span class="n">attributes</span> <span class="o">=</span> <span class="nc">OAuthAttributes</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">registrationId</span><span class="o">,</span> <span class="n">userNameAttributeName</span><span class="o">,</span> <span class="n">oAuth2User</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">());</span>

    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">saveOrUpdate</span><span class="o">(</span><span class="n">attributes</span><span class="o">);</span>
    <span class="n">httpSession</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">SessionUser</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">DefaultOAuth2User</span><span class="o">(</span>
        <span class="nc">Collections</span><span class="o">.</span><span class="na">singleton</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">SimpleGrantedAuthority</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getRoleKey</span><span class="o">())),</span>
            <span class="n">attributes</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">(),</span>
            <span class="n">attributes</span><span class="o">.</span><span class="na">getNameAttributeKey</span><span class="o">());</span>

<span class="o">}</span>
</code></pre></div></div>
<ol>
  <li>ìœ„ì—ì„œ ì–¸ê¸‰í•œ ì¸í„°í˜ì´ìŠ¤ OAuth2UserServiceëŠ” loadUserë¥¼ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ @Overrideë¥¼ í•©ë‹ˆë‹¤.</li>
  <li>OAuth2UserRequestëŠ” ì‰½ê²Œ ë§í•´ì„œ endpointì—ì„œ ìœ ì € ì •ë³´ë¥¼ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê°ì²´ì…ë‹ˆë‹¤. ìœ ì € ì •ë³´ë¥¼ í™œìš©í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤.</li>
  <li>OAuth2UserServiceì˜ êµ¬í˜„ í´ë˜ìŠ¤ì¸ DefaultOAuth2UserServiceì˜ ê°ì²´ delegate(ì„œë¹„ìŠ¤ ìœ„ì„ì)ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</li>
  <li>delegateë¥¼ í†µí•´ ìœ ì €ì˜ ì •ë³´ë¥¼ OAuth2User ê°ì²´ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
    <ul>
      <li>ì´ ë˜í•œ delegateì˜ ë©”ì†Œë“œì¸ loadUserë¥¼ í™œìš©í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>registrationIdëŠ” Client(ì—¬ê¸°ì„œëŠ” Google)ì˜ ë“±ë¡ IDì…ë‹ˆë‹¤.
    <ul>
      <li>userNameAttributeNameì€ ìœ„ì—ì„œ ë°›ì€ userRequestì˜ endpointì—ì„œ ë°›ì€ ìœ ì €ì˜ ì´ë¦„ì…ë‹ˆë‹¤.</li>
      <li>ëª¨ë‘ ìœ ì €ì˜ ì„¸ì…˜, DB ì €ì¥ì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>OAuthAttributesëŠ” ìœ„ì™€ ê°™ì€ attributeë“¤ì„ DTOë¡œ ë§Œë“  í´ë˜ìŠ¤ ì…ë‹ˆë‹¤.
    <ul>
      <li>ë“±ë¡id, ìœ ì €name, Oauth2Userê°ì²´ì˜ getAttributes(Mapì„ ë¦¬í„´)ë¡œ ì„ ì–¸í•˜ëŠ” ì ë§Œ ì•Œê³  ê°‘ì‹œë‹¤.</li>
    </ul>
  </li>
  <li>ì•„ì§ ì‘ì„±í•˜ì§€ ì•Šì•˜ì§€ë§Œ saveOrUpdateëŠ” JPAì˜ ê¸°ëŠ¥ì„ í™œìš©í•´ ìœ ì €ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒìœ¼ë¡œ ë¯¸ë¦¬ ì •ì˜í•©ë‹ˆë‹¤.</li>
  <li>sessionì—ì„œ ìœ ì €ì˜ ì •ë³´ë¥¼ ì ‘ê·¼í•  ì¼ì´ ìˆê¸° ë•Œë¬¸ì— ì„¸ì…˜ì— ìœ ì € ì •ë³´(ë¡œê·¸ì¸ ì¤‘ì¸)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</li>
  <li>ìœ„ì™€ ê°™ì€ ê°’ì„ ë°”íƒ•ìœ¼ë¡œ DefaultOAuth2Userë¼ëŠ” OAuth2User ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.</li>
</ol>

<p>ì •ë§ ë³µì¡í•œ ì½”ë“œì´ê³  ì´í•´í•˜ê¸° ë‚œí•´í•˜ì§€ë§Œ ì§€ê¸ˆì€ <code class="language-plaintext highlighter-rouge">ë¡œê·¸ì¸í•œ ë‚˜ì˜ ì •ë³´ë¥¼ ì €ì¥ì†Œì— ë“±ë¡í•˜ê³  ì„¸ì…˜ì— ë“±ë¡í•œë‹¤</code> ì •ë„ë¡œ ì´í•´í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">User</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="nc">OAuthAttributes</span> <span class="n">attributes</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">entity</span> <span class="o">-&gt;</span> <span class="n">entity</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">attributes</span><span class="o">.</span><span class="na">getPicture</span><span class="o">()))</span>
            <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">toEntity</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>JPAì˜ ì˜ì†ì„±ì„ í†µí•´ ê°’ì´ ìˆ˜ì •ë˜ë©´ updateë¥¼, ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ createì„ í•©ë‹ˆë‹¤.</p>

<p>ê·¸ëŸ°ë° ìœ ì‹¬íˆ ë³´ë‹ˆ ì´í•´ê°€ ë˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">httpSession</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">SessionUser</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>
</code></pre></div></div>
<p>ì™œ êµ³ì´ User í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  SessionUserë¼ëŠ” ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ì„œ httpSessionì— ì„¤ì •í–ˆì„ ê¹Œìš”?</p>

<p>ë°”ë¡œ User í´ë˜ìŠ¤ê°€ Entityì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë˜í•œ Sessionì—ëŠ” ì¸ì¦ì— ê´€ë ¨í•œ ì •ë³´ë§Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— Userì˜ ëª¨ë“  í•„ë“œê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ì´ ì˜ë¬¸ì ì€ ë‹¤ìŒ ì‹œê°„ì— í™•ì¸í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>

<hr />

<p>ìœ„ì—ì„œ attributeë“¤ì„ ë°ì´í„° êµí™˜ì— ì‚¬ìš©í•˜ê¸° ìœ„í•œ DTOê°€ OAuthAttributes ë¼ê³  í–ˆìŠµë‹ˆë‹¤.</p>

<p>attributeë“¤ì´ ìˆìœ¼ë©´ ìœ ì €ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ í´ë˜ìŠ¤ë¥¼ í†µí•´ ìœ ì €ë¥¼ ìƒì„±í•˜ê³  Entityë¡œ ë§Œë“¤ë ¤ê³  í•©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OAuthAttributes</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">attributes</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">nameAttributeKey</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">picture</span><span class="o">;</span>
    <span class="nd">@Builder</span>
    <span class="kd">public</span> <span class="nf">OAuthAttributes</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span><span class="n">attributes</span><span class="o">,</span>
                           <span class="nc">String</span> <span class="n">nameAttributeKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span>
                           <span class="nc">String</span> <span class="n">email</span><span class="o">,</span> <span class="nc">String</span> <span class="n">picture</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">attributes</span> <span class="o">=</span> <span class="n">attributes</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">nameAttributeKey</span> <span class="o">=</span> <span class="n">nameAttributeKey</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">picture</span> <span class="o">=</span> <span class="n">picture</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">OAuthAttributes</span> <span class="nf">of</span><span class="o">(</span><span class="nc">String</span> <span class="n">registrationId</span><span class="o">,</span>
                                     <span class="nc">String</span> <span class="n">userNameAttributeName</span><span class="o">,</span>
                                     <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">attributes</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="s">"naver"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">registrationId</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nf">ofNaver</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">attributes</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="nf">ofGoogle</span><span class="o">(</span><span class="n">userNameAttributeName</span><span class="o">,</span> <span class="n">attributes</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">OAuthAttributes</span> <span class="nf">ofGoogle</span><span class="o">(</span><span class="nc">String</span> <span class="n">userNameAttributeName</span><span class="o">,</span>
                                           <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span><span class="n">attributes</span><span class="o">){</span>
        <span class="k">return</span> <span class="nc">OAuthAttributes</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">name</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"name"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">email</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"email"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">picture</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"picture"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">attributes</span><span class="o">(</span><span class="n">attributes</span><span class="o">)</span>
                <span class="o">.</span><span class="na">nameAttributeKey</span><span class="o">(</span><span class="n">userNameAttributeName</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">OAuthAttributes</span> <span class="nf">ofNaver</span><span class="o">(</span><span class="nc">String</span> <span class="n">userNameAttributeName</span><span class="o">,</span>
                                          <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span><span class="n">attributes</span><span class="o">){</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"response"</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">OAuthAttributes</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">name</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">response</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"name"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">email</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">response</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"email"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">picture</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">response</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"picture"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">attributes</span><span class="o">(</span><span class="n">response</span><span class="o">)</span>
                <span class="o">.</span><span class="na">nameAttributeKey</span><span class="o">(</span><span class="n">userNameAttributeName</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">toEntity</span><span class="o">(){</span>
        <span class="k">return</span> <span class="nc">User</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="n">name</span><span class="o">)</span>
                <span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">email</span><span class="o">)</span>
                <span class="o">.</span><span class="na">picture</span><span class="o">(</span><span class="n">picture</span><span class="o">)</span>
                <span class="o">.</span><span class="na">role</span><span class="o">(</span><span class="nc">Role</span><span class="o">.</span><span class="na">GUEST</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<iframe src="https://giphy.com/embed/BcMJvmwkmbyWpKkBj3" width="480" height="400" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe>
<p><a href="https://giphy.com/gifs/theoffice-nbc-the-office-tv-BcMJvmwkmbyWpKkBj3">via GIPHY</a></p>

<p>ë§Œë§Œì¹˜ ì•Šì€ ì½”ë“œ ê¸¸ì´ë„¤ìš” ë©”ì†Œë“œ ë³„ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<ol>
  <li>ì´ DTO ê°ì²´ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ ìƒì„±ìê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ ìƒì„±ìë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</li>
  <li>of : ì‚¬ìš©ìê°€ OAuth Clientë¥¼ ëˆ„êµ¬ë¡œ í–ˆëŠ”ì§€ì— ë”°ë¼ì„œ ê°€ì§€ê³  ìˆëŠ” Attributeê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">of</code>ë©”ì†Œë“œì—ì„œ ì¡°ê±´ë¬¸ì„ í†µí•´ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.</li>
  <li>ofGoogle : ë§Œì•½ ì œê³µìê°€ Googleì¼ ê²½ìš° ìœ„ì™€ ê°™ì€ build íŒ¨í„´ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•´ ë¦¬í„´í•©ë‹ˆë‹¤.</li>
  <li>ofNaver : ë§Œì•½ ì œê³µìê°€ Naverì¼ ê²½ìš° ìœ„ì™€ ê°™ì€ build íŒ¨í„´ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±, ë¦¬í„´í•©ë‹ˆë‹¤. Googleê³¼ ë‹¤ë¥¸ ì ì€ responseë¥¼ ë°›ëŠ”ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</li>
  <li>toEntity : User ìƒì„±ìì— attributeê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ Entityí™”í•˜ëŠ” ë©”ì†Œë“œë„ ì‘ì„±í•©ë‹ˆë‹¤.</li>
</ol>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">Spring security 3í¸</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/27/cotatoStudy9.html" rel="alternate" type="text/html" title="Spring security 3í¸" /><published>2023-01-27T00:00:00+00:00</published><updated>2023-01-27T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/27/cotatoStudy9</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/27/cotatoStudy9.html"><![CDATA[<p>âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤</code>ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>

<h2 id="5ì¥-ìŠ¤í”„ë§-ì‹œíë¦¬í‹°">5ì¥ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</h2>

<h3 id="ì§€ë‚œ-ì‹œê°„ì—”">ì§€ë‚œ ì‹œê°„ì—”â€¦</h3>

<ol>
  <li>ì´ ì„œë¹„ìŠ¤ëŠ” ìœ ì €ê°€ ê²Œì‹œë¬¼ì„ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.</li>
  <li>ìœ ì €ëŠ” ì•„ì´ë””, ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„ìœ¼ë¡œ êµ¬ë³„ëœë‹¤.</li>
  <li>OAuthë¥¼ í†µí•´ ë¡œê·¸ì¸ ê³¼ì •ì„ Google, Naverì— ìœ„ì„í•œë‹¤.</li>
  <li>ì‚¬ìš©ìì˜ status(Role)ì— ë”°ë¼ ê¸°ëŠ¥ì´ ì œí•œëœë‹¤.</li>
  <li>OAuth2ë¡œ ë¡œê·¸ì¸í•œ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ê¸°ëŠ¥</li>
</ol>

<p>ìœ„ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ê°€ì§„ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>

<h3 id="serializable">Serializable</h3>
<p>ì´ì „ ì‹œê°„ì— User í´ë˜ìŠ¤ ëŒ€ì‹  SessionUser í´ë˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ë¥¼ ì„¤ëª…ë“œë ¸ëŠ”ë°ìš”.</p>

<ol>
  <li>User í´ë˜ìŠ¤ëŠ” Entity í´ë˜ìŠ¤ì´ë‹¤</li>
  <li>User í´ë˜ìŠ¤ì˜ ëª¨ë“  í•„ë“œê°’ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.</li>
</ol>

<p>ìœ„ì™€ ê°™ì€ ì´ìœ ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë˜í•œ <code class="language-plaintext highlighter-rouge">Serializable</code>ì„ ì§„í–‰í•´ì•¼ë§Œ Sessionì— ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<p>Serializableì˜ ì¥ì ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œìš”?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>easily restored to a byte stream, allows the state of an object to be saved to a file, sent over a network, or stored in DB
</code></pre></div></div>
<p>ì§ë ¬í™”ëŠ” í´ë˜ìŠ¤ê°€ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br />
javaì—ì„œëŠ” implement Serializableë¡œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ì´ë¥¼ í†µí•´ ê°™ì€ java ì‹œìŠ¤í…œ ê°„ ë°ì´í„° êµí™˜ì„ ìš©ì´í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="ê·¸ë ‡ë‹¤ë©´-user-í´ë˜ìŠ¤ì—-ì§ì ‘-ì§ë ¬í™”ë¥¼-êµ¬í˜„í•˜ë©´-ì•ˆë˜ë‚˜ìš”">ê·¸ë ‡ë‹¤ë©´ User í´ë˜ìŠ¤ì— ì§ì ‘ ì§ë ¬í™”ë¥¼ êµ¬í˜„í•˜ë©´ ì•ˆë˜ë‚˜ìš”?</h3>
<p>User í´ë˜ìŠ¤ëŠ” Entity í´ë˜ìŠ¤ ì…ë‹ˆë‹¤.</p>

<p>Entity í´ë˜ìŠ¤ëŠ” ì–´ë– í•œ ê´€ê³„ê°€ í˜•ì„±ë  ì§€ ëª¨ë¦…ë‹ˆë‹¤. ê·¸ ìƒí™©ì—ì„œ ì§ì ‘ Entity í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ Dtoë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.</p>

<h3 id="í™”ë©´-êµ¬ì„±">í™”ë©´ êµ¬ì„±</h3>
<p>ì´ì œëŠ” í™”ë©´ì„ êµ¬ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ko"</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;div</span> <span class="na">th:replace=</span><span class="s">"fragments/header.html :: fragment-header"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ ì‹œì‘í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;</span>
<span class="c">&lt;!--    ë¡œê·¸ì¸ ê¸°ëŠ¥ ì˜ì—­--&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-6"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/posts/save"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>ê¸€ ë“±ë¡<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;th:block</span> <span class="na">th:if=</span><span class="s">"${not #strings.isEmpty(userName)}"</span><span class="nt">&gt;</span>
                Logged in as <span class="nt">&lt;span</span> <span class="na">th:text=</span><span class="s">"${userName}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/logout"</span> <span class="na">class = </span><span class="s">"btn btn-info active"</span> <span class="na">role=</span><span class="s">"button"</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/th:block&gt;</span>
            <span class="nt">&lt;th:block</span> <span class="na">th:unless=</span><span class="s">"${not #strings.isEmpty(userName)}"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/oauth2/authorization/google"</span> <span class="na">class=</span><span class="s">"btn btn-success active"</span> <span class="na">role=</span><span class="s">"button"</span><span class="nt">&gt;</span>Google Login<span class="nt">&lt;/a&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/oauth2/authorization/naver"</span> <span class="na">class=</span><span class="s">"btn btn-success active"</span> <span class="na">role=</span><span class="s">"button"</span><span class="nt">&gt;</span>Naver Login<span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/th:block&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">th:replace=</span><span class="s">"fragments/footer.html :: fragment-footer"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>ì´ì „ html ì½”ë“œì™€ ë¹„ìŠ·í•œë° ë¡œê·¸ì¸ ë¶€ë¶„ë§Œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;th:block</span> <span class="na">th:if=</span><span class="s">"${not #strings.isEmpty(userName)}"</span><span class="nt">&gt;</span>
    Logged in as <span class="nt">&lt;span</span> <span class="na">th:text=</span><span class="s">"${userName}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/logout"</span> <span class="na">class = </span><span class="s">"btn btn-info active"</span> <span class="na">role=</span><span class="s">"button"</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/th:block&gt;</span>
<span class="nt">&lt;th:block</span> <span class="na">th:unless=</span><span class="s">"${not #strings.isEmpty(userName)}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/oauth2/authorization/google"</span> <span class="na">class=</span><span class="s">"btn btn-success active"</span> <span class="na">role=</span><span class="s">"button"</span><span class="nt">&gt;</span>Google Login<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/oauth2/authorization/naver"</span> <span class="na">class=</span><span class="s">"btn btn-success active"</span> <span class="na">role=</span><span class="s">"button"</span><span class="nt">&gt;</span>Naver Login<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/th:block&gt;</span>
</code></pre></div></div>
<ol>
  <li>íƒ€ì„ë¦¬í”„ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ìœ ì €ì˜ ì´ë¦„ì´ ì¡´ì¬í•œë‹¤ë©´ ë¡œê·¸ì¸ ìœ ì €ì˜ ì´ë¦„ì„ ì¶œë ¥í•˜ê³  ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì´ ë³´ì´ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
    <ul>
      <li>ë¡œê·¸ì•„ì›ƒì„ í•  ê²½ìš°ëŠ” â€œ/logoutâ€ì˜ urlë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>ìœ ì €ì˜ ì´ë¦„ì´ ì—†ë‹¤ë©´ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ íŒë‹¨í•˜ì—¬ ë¡œê·¸ì¸ ë²„íŠ¼ì´ ë“œëŸ¬ë‚˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.
    <ul>
      <li>Naver ë¡œê·¸ì¸ì€ ì°¨í›„ì— ì¶”ê°€í•  ê²ƒì´ë¯€ë¡œ í˜„ì¬ëŠ” ë²„íŠ¼ë§Œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
</ol>

<h3 id="ë¡œê·¸ì¸ê´€ë ¨-ì»¨íŠ¸ë¡¤ëŸ¬-ìˆ˜ì •í•˜ê¸°">ë¡œê·¸ì¸ê´€ë ¨ ì»¨íŠ¸ë¡¤ëŸ¬ ìˆ˜ì •í•˜ê¸°</h3>
<p>í™”ë©´ì„ êµ¬ì„±í•˜ì˜€ìœ¼ë‹ˆ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">"/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IndexController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PostsService</span> <span class="n">postsService</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">HttpSession</span> <span class="n">httpSession</span><span class="o">;</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">index</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"posts"</span><span class="o">,</span> <span class="n">postsService</span><span class="o">.</span><span class="na">findAllDesc</span><span class="o">());</span>
        <span class="nc">SessionUser</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SessionUser</span><span class="o">)</span><span class="n">httpSession</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"userName"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="s">"index"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/posts/save"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">postsSave</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"posts-save"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<ol>
  <li>ìœ„ì—ì„œ httpSessionì— ìœ ì €ì˜ ì •ë³´ë¥¼ ì €ì¥í–ˆê¸° ë•Œë¬¸ì— httpSessionì„ ì •ì˜í•©ë‹ˆë‹¤.
    <ul>
      <li>ê²Œì‹œë¬¼ì„ ë“±ë¡í•˜ê¸° ìœ„í•´ PostsServiceë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>userì˜ ì •ë³´ë¥¼ httpSessionì—ì„œ ë°›ì•„ì˜µë‹ˆë‹¤.</li>
  <li>ë“±ë¡í•œ ê²Œì‹œë¬¼ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ postsServiceì˜ ëª¨ë“  ê²Œì‹œë¬¼ì„ â€œpostâ€ë¡œ modelì— ì†ì„±ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</li>
  <li>userê°€ ì¡´ì¬í•œë‹¤ë©´ modelì— â€œuserNameâ€ì†ì„±ìœ¼ë¡œ user.getName()ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
    <ul>
      <li>ì´ë¥¼ í†µí•´ HTMLì— ìœ ì €ì˜ ì´ë¦„ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ol>

<p>ğŸ¥³Naver ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì œì™¸í•˜ê³  ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>

<iframe src="https://giphy.com/embed/kyLYXonQYYfwYDIeZl" width="480" height="360" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe>
<p><a href="https://giphy.com/gifs/sesamestreet-sesame-street-50th-anniversary-kyLYXonQYYfwYDIeZl">via GIPHY</a></p>

<p>í•˜ì§€ë§Œ ê°œë°œìë¼ë©´ ëª¨ë¦„ì§€ê¸° ì½”ë“œ ê°œì„ ì„ ìƒê°í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<h3 id="ì–´ë…¸í…Œì´ì…˜-ê¸°ë°˜ìœ¼ë¡œ-ê°œì„ ">ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ê°œì„ </h3>
<p>IndexControllerì—ì„œ ê°€ì¥ ì–´ìƒ‰í•œ ë¶€ë¶„ì„ ê¼½ìë©´ ë°”ë¡œ ì•„ë˜ì™€ ê°™ì€ ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">SessionUser</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SessionUser</span><span class="o">)</span><span class="n">httpSession</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">);</span>
</code></pre></div></div>
<p>ë§Œì•½ ë‹¤ë¥¸ ë¼ìš°í„°ì—ì„œë„ SessoinUser ê°€ í•„ìš”í•˜ë©´ ìœ„ì˜ ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>ğŸ¤”ê·¸ë ‡ë‹¤ë©´ ìœ„ì—ì„œ SeesionUserë¥¼ ì •ì˜í•˜ë©´ ì•ˆë˜ë‚˜ìš”?</p>

<p>httpSessionì— user attributeê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ìœ„ ë°©ì‹ì€ ì ì ˆí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ ì‚¬ìš©ì ì§€ì • <code class="language-plaintext highlighter-rouge">ì–´ë…¸í…Œì´ì…˜</code>ì„ ì •ì˜í•˜ê³  ì´ë¥¼ ì ìš©í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">PARAMETER</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">LoginUser</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ê·¸ë¦¬ê³  ì´ ì–´ë…¸í…Œì´ì…˜ì„ ìœ„í•œ Resolver(íŒŒë¼ë¯¸í„° ê°€ê³µì„ ìœ„í•œ)ë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginUserArgumentResolver</span> <span class="kd">implements</span> <span class="nc">HandlerMethodArgumentResolver</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">HttpSession</span> <span class="n">httpSession</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="nc">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">isLoginUserAnnotation</span> <span class="o">=</span> <span class="n">parameter</span><span class="o">.</span><span class="na">getParameterAnnotation</span><span class="o">(</span><span class="nc">LoginUser</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">isUserClass</span> <span class="o">=</span> <span class="nc">SessionUser</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">parameter</span><span class="o">.</span><span class="na">getParameterType</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">isLoginUserAnnotation</span> <span class="o">&amp;&amp;</span> <span class="n">isUserClass</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="nc">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="nc">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span> <span class="nc">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span> <span class="nc">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">httpSession</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Resolverì˜ ì´ë¦„ì€ êµ¬í˜„í•˜ë ¤ëŠ” ì–´ë…¸í…Œì´ì…˜ëª… + ArgumentResolver ë˜ëŠ” ArgumentResolverSupportë¡œ ì‘ì„±í•©ë‹ˆë‹¤.</p>

<p>ë˜í•œ <code class="language-plaintext highlighter-rouge">HandlerMethodArgumentResolver</code>ë¥¼ implemnetsí•˜ì—¬ <code class="language-plaintext highlighter-rouge">supportsParameter</code>, <code class="language-plaintext highlighter-rouge">resolveArgument</code>ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</p>

<p>supportsParameterë¥¼ í†µí•´ ì–´ë…¸í…Œì´ì…˜ì´ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦ì„ ì§„í–‰í•˜ê³  resovleArgumentë¥¼ í†µí•´ ë¡œì§ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>

<p>ì—¬ê¸°ì—ì„œëŠ” parameter.getParameterAnnotation(LoginUser.class)!=nullì˜ ë¡œì§ì„ ì‚¬ìš©í•˜ì˜€ê³  resolveArgumentì—ì„œ ê°ì²´ë¥¼ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.</p>

<p>ì´ë ‡ê²Œ ìƒì„±í•œ ì–´ë…¸í…Œì´ì…˜ì„ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">WebMvcConfigurer</code>ì— ì¶”ê°€ë¥¼ í•©ë‹ˆë‹¤.</p>

<h3 id="webmvcconfigurer">WebMvcConfigurer</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="kd">implements</span> <span class="nc">WebMvcConfigurer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">LoginUserArgumentResolver</span> <span class="n">loginUserArgumentResolver</span><span class="o">;</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addArgumentResolvers</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">HandlerMethodArgumentResolver</span><span class="o">&gt;</span> <span class="n">argumentResolvers</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">argumentResolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loginUserArgumentResolver</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ webconfigë¥¼ ì‘ì„±í•˜ì—¬ ë°©ê¸ˆ ìƒì„±í•œ resovlerë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.</p>

<p>ì ì´ì œ @LoginUser ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">String</span> <span class="nf">index</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">,</span> <span class="nd">@LoginUser</span> <span class="nc">SessionUser</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"posts"</span><span class="o">,</span> <span class="n">postsService</span><span class="o">.</span><span class="na">findAllDesc</span><span class="o">());</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"userName"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="s">"index"</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì„¸ì…˜ì •ë³´ë¥¼ ì§ì ‘ ì „ë‹¬í•˜ì—¬ ì°¨í›„ ì„¸ì…˜ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°ì—ë„ ì‰½ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ìœ ì§€ë³´ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">Spring security 1í¸</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/25/cotatoStudy7.html" rel="alternate" type="text/html" title="Spring security 1í¸" /><published>2023-01-25T00:00:00+00:00</published><updated>2023-01-25T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/25/cotatoStudy7</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/25/cotatoStudy7.html"><![CDATA[<p>âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤</code>ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>

<h2 id="5ì¥-ìŠ¤í”„ë§-ì‹œíë¦¬í‹°">5ì¥ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</h2>

<h3 id="ê°„ë‹¨íˆ-ë¡œê·¸ì¸ì„-êµ¬í˜„í•´ì•¼-í•œë‹¤ë©´-ì–´ë–»ê²Œ-í•˜ì‹¤ê±´ê°€ìš”">ğŸ¤”ê°„ë‹¨íˆ ë¡œê·¸ì¸ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤ë©´ ì–´ë–»ê²Œ í•˜ì‹¤ê±´ê°€ìš”?</h3>

<p>ì €ë¼ë©´ ê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">DB</code>ì— <code class="language-plaintext highlighter-rouge">id</code>ì™€ <code class="language-plaintext highlighter-rouge">password</code>ë¥¼ ì €ì¥í•˜ê³  ìš”ì²­ë°›ì€ <code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">password</code>ë¥¼ ë¹„êµí•´ ì°¸/ê±°ì§“ ê°’ì„ ë¦¬í„´í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ìœ„ ë°©ì‹ì€ ì—¬ëŸ¬ ë¬¸ì œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<ol>
  <li>ì˜ˆìƒ ê°€ëŠ¥í•œ ë¬¸ì œëŠ” <code class="language-plaintext highlighter-rouge">DB</code>ì— ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸ê°€ <code class="language-plaintext highlighter-rouge">ì•”í˜¸í™”</code>ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ë¡œê·¸ì¸ ìš”ì²­, íšŒì›ê°€ì… ìš”ì²­ ì¤‘ê°„ì— íƒˆì·¨ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ì¸ ì„±ê³µ ì—¬ë¶€ë¥¼ ë‹¨ìˆœíˆ ì°¸/ê±°ì§“ ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤ë©´ ë‹¤ë¥¸ í˜ì´ì§€ì— ì ‘ê·¼í•  ë•Œë„ ì•„ë¬´ëŸ° ë¬¸ì œ ì—†ì´ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ ë©ë‹ˆë‹¤. ì¦‰ <code class="language-plaintext highlighter-rouge">ì¸ê°€</code>ì— ëŒ€í•œ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì¸ì¦ : ë¡œê·¸ì¸ê³¼ ê°™ì´ ìê²©ì„ ì¦ëª…

ì¸ê°€ : ì¸ì¦ì´ ëœ ì‚¬ìš©ìê°€ ìì› ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œí•¨(ex : ë§ˆì´í˜ì´ì§€)
</code></pre></div></div>

<p>ì´ëŸ¬í•œ ë¬¸ì œì ì„ ìƒê°í•˜ê³  ë” ë‚˜ì•„ê°€ í† í°ì„ ì ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h3 id="í† í°ì¸ì¦ë°©ì‹">í† í°ì¸ì¦ë°©ì‹</h3>

<blockquote>
  <p>ğŸ“Œì¸ì¦ ì±…ì„ì„ ì„œë²„ì— ë‘ëŠ” ì„¸ì…˜ì¸ì¦ë„ ìˆì§€ë§Œ ë³¸ ë‚´ìš©ì—ì„œëŠ” í† í°ì¸ì¦ë§Œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ë°”ë¡œ refresh tokenê³¼ access tokenì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<ol>
  <li>ì‚¬ìš©ìëŠ” ì„œë²„ë¡œë¶€í„° ì¸ì¦ì„ í•˜ê³  refresh tokenì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.</li>
  <li>ì‚¬ìš©ìëŠ” ë°œê¸‰ë°›ì€ refresh tokenì„ í†µí•´ access tokenì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.</li>
  <li>ì‚¬ìš©ìëŠ” access tokenì„ í†µí•´ ì¸ê°€ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.</li>
</ol>

<p>ì—¬ê¸°ì„œ refresh tokenì€ ìœ íš¨ê¸°ê°„ì´ ê¸¸ê³  ì‚¬ìš©ìì˜ ì •ë³´ê°€ ì•”í˜¸í™” ë˜ì–´ìˆê³  ìœ íš¨í•œ ë™ì•ˆ access tokenì„ ë°œê¸‰ ë°›ì„ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.</p>

<p>access tokenì€ refresh tokenë³´ë‹¤ ìœ íš¨ê¸°ê°„ì´ ì§§ê³  ì´ tokenì„ í†µí•´ì„œë§Œ ì‚¬ìš©ìì˜ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì´ì™€ ê°™ì€ ë°©ë²•ì´ë©´ tokenì´ ìœ íš¨í•œì§€ ì„œë²„ì—ì„œ ê²€ì¦í•˜ê³  ì•”í˜¸í™”ë„ ë˜ì–´ìˆìœ¼ë©° ìœ íš¨ê¸°ê°„ì´ ì¡´ì¬í•´ ì¼ì • ì‹œê°„ í›„ì—ëŠ” ë‹¤ì‹œ ë°œê¸‰ë°›ì•„ì•¼ í•˜ëŠ” ì‹ ë¢°ì„±ë„ ìˆìŠµë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì€ ë°©ì‹ë„ ë¬¸ì œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<div style="width:100%;height:0;padding-bottom:73%;position:relative;"><iframe src="https://giphy.com/embed/nqtYybzXsCy763Q5EQ" width="100%" height="100%" style="position:absolute" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe></div>
<p><a href="https://giphy.com/gifs/nqtYybzXsCy763Q5EQ">via GIPHY</a></p>

<p><em>ë°”ë¡œ tokenì´ ì™¸ë¶€ì—ì„œ íƒˆì·¨ê°€ ê°€ëŠ¥í•œ ì ì…ë‹ˆë‹¤. ì„¸ì…˜ ì¸ì¦ ë°©ì‹ì˜ ë¬¸ì œì¸ ì„œë²„ ë¶€í•˜ë¥¼ í•´ê²°í–ˆì§€ë§Œ ì™¸ë¶€ íƒˆì·¨ì—ì„œ ììœ ë¡­ì§€ ì•Šì€ ì ì´ í† í° ì¸ì¦ ë°©ì‹ì˜ ë¬¸ì œì…ë‹ˆë‹¤.</em></p>

<h3 id="ì´ë ‡ê²Œ-ë¡œê·¸ì¸ì´-ì–´ë µìŠµë‹ˆë‹¤">ğŸ˜®â€ğŸ’¨ì´ë ‡ê²Œ ë¡œê·¸ì¸ì´ ì–´ë µìŠµë‹ˆë‹¤.</h3>
<p>ì´ë ‡ê²Œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ê³  ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒì€ ê¹Œë‹¤ë¡œìš´ ì¼ì…ë‹ˆë‹¤.<br />
í•˜ì§€ë§Œ Springì—ì„œ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬ë¡œ ë§¤ìš° ì•ˆì „í•œ ì¸ì¦ì„ ê°„ë‹¨íˆ êµ¬í˜„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

<h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°ë€">ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€</h3>
<p>Spring securityëŠ” <code class="language-plaintext highlighter-rouge">ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ê°€ëŠ¥í•œ ì¸ì¦, ì¸ê°€ í”„ë ˆì„ì›Œí¬</code> ì…ë‹ˆë‹¤.</p>

<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” <code class="language-plaintext highlighter-rouge">form-base ì¸ì¦</code>ê³¼ <code class="language-plaintext highlighter-rouge">OAuth</code>, <code class="language-plaintext highlighter-rouge">OpenID</code> ê°™ì€ ì ‘ê·¼ ìœ„ì„ ë°©ì‹ ë“± ì—¬ëŸ¬ ë°©ì‹ì˜ ì¸ì¦ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>

<p>ë˜í•œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” CSRF ë³´í˜¸ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>CSRFëŠ” ë§í¬ ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì¸ì¦ëœ ëŒ€ìƒ ì‚¬ì´íŠ¸ë¡œ ì›í•˜ì§€ ì•ŠëŠ” HTTP ìš”ì²­ì„ ì „ì†¡í•˜ëŠ” ê³µê²© ë°©ì‹ì…ë‹ˆë‹¤.</p>
</blockquote>

<h3 id="ìŠ¤í”„ë§-ì‹œíë¦¬í‹°-ì ìš©í•´ë³´ê¸°">ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì ìš©í•´ë³´ê¸°</h3>

<iframe src="https://giphy.com/embed/3ohhwfwxg4d1h82LxS" width="480" height="478" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe>
<p><a href="https://giphy.com/gifs/cbc-funny-comedy-3ohhwfwxg4d1h82LxS">via GIPHY</a></p>

<p>ì–¼ë§ˆë‚˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì¢‹ì€ì§€ ì•Œê² ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ë³¸ ì±…ì—ì„œ ì œì‹œí•˜ëŠ” ì˜ˆì œë¥¼ ë”°ë¼í•´ë³¼ê¹Œìš”?</p>

<p>ìš°ì„  ì˜ˆì œë¥¼ ë”°ë¼í•˜ê¸° ì•ì„œ í˜„ì¬ êµ¬í˜„í•´ì•¼í•˜ëŠ” ì„œë¹„ìŠ¤ì™€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¡œ OAuth2ë¥¼ í•´ì•¼í•˜ëŠ” ì´ìœ ë¥¼ ì•Œì•„ì•¼í•©ë‹ˆë‹¤.</p>

<p>ì•ì„œ ì„¤ëª…ë“œë¦° ê²ƒê³¼ ê°™ì´ ë¡œê·¸ì¸ì€ êµ¬í˜„í•˜ëŠ”ë° ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•˜ê³  ë³´ì•ˆ ì´ìŠˆ ë˜í•œ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ ì‘ë‹¤ë©´ ìƒëŒ€ì ìœ¼ë¡œ ê·œëª¨ê°€ í¬ê³  ì‹ ë¢°ë„ê°€ ë†’ì€ ì œ 3ìì—ê²Œ ì¸ì¦ ë° ì¸ê°€ë¥¼ ìœ„ì„í•˜ëŠ” OAuthë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<ol>
  <li>ì´ ì„œë¹„ìŠ¤ëŠ” ìœ ì €ê°€ ê²Œì‹œë¬¼ì„ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆë‹¤.</li>
  <li>ìœ ì €ëŠ” ì•„ì´ë””, ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„ìœ¼ë¡œ êµ¬ë³„ëœë‹¤.</li>
  <li>OAuthë¥¼ í†µí•´ ë¡œê·¸ì¸ ê³¼ì •ì„ Google, Naverì— ìœ„ì„í•œë‹¤.</li>
</ol>

<p>ì´ì™€ ê°™ì€ ë°°ê²½ìœ¼ë¡œ ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ êµ¬í˜„í•´ì•¼ í• ì§€ ê³ ë¯¼í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<p><img src="https://i.stack.imgur.com/QUh9s.png" alt="googlelogin" title="ë§ì´ ë³¸ í™”ë©´" /></p>

<p>ìœ„ì™€ ê°™ì´ ë§ì´ ë³¸ êµ¬ê¸€ ì•„ì´ë””ë¡œ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì–´ë–¤ ê°œì¸ ì •ë³´ë¥¼ ì œê³µí• ì§€ ë‚˜íƒ€ë‚˜ê²Œ ëœë‹¤.</p>

<p>ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ” ì•„ì´ë””, ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ìœ ì €ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ Entityê°€ í•„ìš”í•˜ë‹¤.</p>

<p>ê·¸ë˜ì„œ User Classê°€ í•„ìš”í•˜ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">extends</span> <span class="nc">BaseTimeEntity</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">picture</span><span class="o">;</span>
    <span class="nd">@Enumerated</span><span class="o">(</span><span class="nc">EnumType</span><span class="o">.</span><span class="na">STRING</span><span class="o">)</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Role</span> <span class="n">role</span><span class="o">;</span>

    <span class="nd">@Builder</span>
    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">email</span><span class="o">,</span> <span class="nc">String</span> <span class="n">picture</span><span class="o">,</span> <span class="nc">Role</span> <span class="n">role</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">picture</span> <span class="o">=</span> <span class="n">picture</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">role</span> <span class="o">=</span> <span class="n">role</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">update</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">picture</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">picture</span> <span class="o">=</span> <span class="n">picture</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getRoleKey</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">role</span><span class="o">.</span><span class="na">getKey</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ol>
  <li>ì•„ì´ë””, ì´ë¦„, ì´ë©”ì¼, ì‚¬ì§„ì´ í•„ìš”í•´ Column ë° Id ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œ ì </li>
  <li>ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ì¤„ì´ê¸° ìœ„í•´ Getter, NoArgsConstructorë¥¼ ì‚¬ìš©í•œ ì </li>
  <li>User ClassëŒ€ë¡œ ë§¤í•‘ì´ ë  ê²ƒì´ê¸° ë•Œë¬¸ì— Entity ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œ ì </li>
</ol>

<p>ìœ„ì™€ ê°™ì€ 3ê°€ì§€ ì´ìœ ëŠ” ì•ì—ì„œ ë°°ìš´ ë‚´ìš©ìœ¼ë¡œ ì¶©ë¶„íˆ ì´í•´ê°€ ë©ë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ <code class="language-plaintext highlighter-rouge">Role</code>ì€ ìƒëš±ë§ê²Œ ì™œ ì¡´ì¬í•˜ëŠ” ê±¸ê¹Œìš”?<br />
ìš”êµ¬ì‚¬í•­ì— ì—­í• ì— ê´€ë ¨í•œ ê¸°ëŠ¥ì€ ì—†ì—ˆëŠ”ë° ë§ì´ì£ </p>

<div style="width:480px"><iframe allow="fullscreen" frameborder="0" height="270" src="https://giphy.com/embed/P6trDNTPCVBuH9clMl/video" width="480"></iframe></div>

<p>ë°”ë¡œ ì‚¬ìš©ìì˜ ì§ì±…(Role)ì— ë”°ë¼ ê¶Œí•œì´ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<p><img src="https://support.kmong.com/hc/article_attachments/900002727666/FAQ.PNG" alt="time" title="ê°œì¸ì •ë³´ë³´ê´€ê¸°ê°„" /></p>

<p>ê¸°ëŠ¥ ëª…ì„¸ì„œê°€ ì¹œì ˆí•˜ì§€ ì•Šì•˜ì§€ë§Œ ê°„ë‹¨íˆ íšŒì› ê°€ì… ì•½ê´€ì„ í†µí•´ ì˜ˆë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<p><em>íšŒì› íƒˆí‡´ë¥¼ í•˜ë”ë¼ë„ ë‚´ ì •ë³´ê°€ ë°”ë¡œ ì‚¬ë¼ì§€ëŠ” ê²ƒì´ ì•„ë‹Œ ì‚­ì œì²˜ë¦¬ëœ ìƒíƒœë¡œ <code class="language-plaintext highlighter-rouge">ê°œì¸ì •ë³´ë³´ê´€ê¸°ê°„</code> ë™ì•ˆ DBì— ë‚¨ì•„ìˆê²Œ ë©ë‹ˆë‹¤.</em></p>

<p>ê·¸ë ‡ê¸° ë•Œë¬¸ì— íƒˆí‡´í•œ íšŒì›ì€ DBì— ë‚¨ì•„ìˆë”ë¼ë„ ê²Œì‹œê¸€ì„ ìƒì„±í•  ìˆ˜ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ ì—­í• ì„ ì‰½ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ enum classë¡œ Roleì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>

<p>ë˜í•œ Spring Securityì˜ ì—­í•  ì§€ì • ê·œì¹™(ROLE_ì‚¬ìš©ìì§€ì •)ì„ ë”°ë¥¸ ë‹¤ë©´ Roleì„ ìƒì„±, ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Role</span> <span class="o">{</span>
    <span class="no">GUEST</span><span class="o">(</span><span class="s">"ROLE_GUEST"</span><span class="o">,</span> <span class="s">"ì†ë‹˜"</span><span class="o">),</span>
    <span class="no">USER</span><span class="o">(</span><span class="s">"ROLE_USER"</span><span class="o">,</span> <span class="s">"ì¼ë°˜ ì‚¬ìš©ì"</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">key</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì´ì™€ ê°™ì´ Role enum classë˜í•œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>User í´ë˜ìŠ¤ì˜ Roleì—ì„œ Enumerated(EnumType.STRING) ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì¸ ì´ìœ ëŠ”
ì—´ê±°í˜•ì´ ì–´ë–¤ ê°’ì„ ê°€ì§€ëŠ”ì§€ ë‹¨ìˆœ ìˆ«ìë¡œ ë³´ëŠ” ê²ƒ ë³´ë‹¤ ë¬¸ìì—´ë¡œ í™•ì¸ í•˜ëŠ” ê²ƒì´ 
ë” ì´í•´ê°€ ì‰½ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
</blockquote>

<p>ì´ì œ ì„œë¹„ìŠ¤ì˜ ê¸°ë³¸ì ì¸ ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">Thymeleafë¡œ í™”ë©´ êµ¬ì„±í•˜ê¸°</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/21/cotatoStudy6.html" rel="alternate" type="text/html" title="Thymeleafë¡œ í™”ë©´ êµ¬ì„±í•˜ê¸°" /><published>2023-01-21T00:00:00+00:00</published><updated>2023-01-21T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/21/cotatoStudy6</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/21/cotatoStudy6.html"><![CDATA[<p>âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤</code>ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>

<h2 id="4ì¥-í™”ë©´-êµ¬ì„±í•˜ê¸°">4ì¥ í™”ë©´ êµ¬ì„±í•˜ê¸°</h2>

<p>ë³¸ ì±…ì—ì„œëŠ” ë¨¸ìŠ¤í…Œì¹˜ë¡œ í™”ë©´êµ¬ì„±ì„ í•˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ë‹¨ì ìœ¼ë¡œ íƒ€ì„ë¦¬í”„ë¥¼ ì‚¬ìš©í•´ë³´ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<ul>
  <li>ë¨¸ìŠ¤í…Œì¹˜ëŠ” <code class="language-plaintext highlighter-rouge">í…œí”Œë¦¿ ì–¸ì–´</code>ì´ê³ , í…œí”Œë¦¿ì—ì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì´ ì œí•œì ì´ê¸° ë•Œë¬¸ì— ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” ì½”ë“œë¥¼ ì¶”ê°€ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.</li>
  <li>íƒ€ì„ë¦¬í”„ëŠ” <code class="language-plaintext highlighter-rouge">í…œí”Œë¦¿ ì—”ì§„</code>ì´ê³ , <code class="language-plaintext highlighter-rouge">í…œí”Œë¦¿ ì–¸ì–´</code>ë³´ë‹¤ëŠ” ë³µì¡í•œ ë°ì´í„° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ ë¬¸ë²•ì´ ìƒëŒ€ì ìœ¼ë¡œ ì–´ë µìŠµë‹ˆë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ğŸ“Œíƒ€ì„ë¦¬í”„ëŠ” ë¬¸ë²•ì´ ìƒëŒ€ì ìœ¼ë¡œ ì–´ë µë”ë¼ë„ ë³´í¸ì ìœ¼ë¡œ ë§ì´ ì“°ì´ê³  ë°ì´í„° ì²˜ë¦¬ê°€ ìš©ì´í•˜ê¸° ë•Œë¬¸ì— ë¨¸ìŠ¤í…Œì¹˜ì—ì„œ íƒ€ì„ë¦¬í”„ë¡œ ë³€ê²½í•˜ì—¬ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
</code></pre></div></div>
<h3 id="ê¸°ì¡´ì˜-í™”ë©´-êµ¬ì„±">ê¸°ì¡´ì˜ í™”ë©´ êµ¬ì„±</h3>
<p>ë³¸ ì±…ì—ì„œëŠ” ë¨¸ìŠ¤í…Œì¹˜ë¡œ í™”ë©´ êµ¬ì„±ì„ í•©ë‹ˆë‹¤.</p>

<p>header + ë³¸ë¬¸ + footerë¡œ í™”ë©´ì—ì„œ ë°˜ë³µì ìœ¼ë¡œ ì“°ì´ëŠ” ë¶€ë¶„ì„ header, footerë¡œ ë”°ë¡œ ì •ì˜í•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>HTMLì€ ìœ„ì—ì„œë¶€í„° ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— cssë¥¼ headerì— jsë¥¼ footerì— ë‘¡ë‹ˆë‹¤.</p>
  <blockquote>
    <p>ì´ëŸ¬í•œ êµ¬ì„±ì€ í˜ì´ì§€ ë¡œë”© ì†ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.</p>
  </blockquote>
</blockquote>

<p>ë¨¸ìŠ¤í…Œì¹˜ëŠ” í…œí”Œë¦¿ ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— headerì™€ footerë¥¼ ì •ì˜í•˜ê³  ê·¸ ë‚´ìš© ê·¸ëŒ€ë¡œ ë°˜ì˜ì´ ë©ë‹ˆë‹¤.</p>

<p><em>ì¦‰ HTMLì—ì„œ ë³¸ë¬¸ì„ ì œì™¸í•œ ìœ— ë¶€ë¶„ê³¼ ì•„ë« ë¶€ë¶„ì„ ê·¸ëŒ€ë¡œ mustacheíŒŒì¼ë¡œ ë§Œë“­ë‹ˆë‹¤.</em></p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>ìŠ¤í”„ë§ ë¶€íŠ¸ ì›¹ì„œë¹„ìŠ¤<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;body&gt;</span>
</code></pre></div></div>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ ë‘ ì†ŒìŠ¤ì½”ë“œë¥¼ ê°ê° header.mustache, footer.mustacheë¡œ ì •ì˜í•˜ê³ </p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
ë³¸ë¬¸ë‚´ìš©                

</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ í™”ë©´ì„ ì‘ì„±í•©ë‹ˆë‹¤.</p>

<p>ëŠ” í˜„ì¬ íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ë¥¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤, í˜„ì¬ íŒŒì¼ì´ resource/templatesì— ì¡´ì¬í•œë‹¤ë©´<br />
ëŠ” resource/templates/layout/header.mustacheì…ë‹ˆë‹¤.</p>
<blockquote>
  <p>íŒŒì¼ íƒ€ì…ì€ mustacheë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìë™ìœ¼ë¡œ header.mustacheë¥¼ ì¸ì‹í•©ë‹ˆë‹¤.</p>
</blockquote>

<p>í•˜ì§€ë§Œ thymeleafëŠ” fragmentë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ëŠ¥ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;th:block</span> <span class="na">th:fragment=</span><span class="s">"fragment-header"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>ìŠ¤í”„ë§ ë¶€íŠ¸ ì›¹ ì„œë¹„ìŠ¤<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/th:block&gt;</span>
</code></pre></div></div>
<p>thymeleafë¥¼ ì‚¬ìš©í•œ headerì…ë‹ˆë‹¤.</p>
<ol>
  <li>íƒ€ì„ë¦¬í”„ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¬¸ë²•ì¸ th:blockìœ¼ë¡œ ì˜ì—­ì„ ì§€ì •í•˜ê³ </li>
  <li>th:fragmentë¥¼ í†µí•´ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ í˜¸ì¶œ í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.</li>
  <li>ìœ„ì—ì„œ ì–¸ê¸‰í•œ ì´ìœ ë¡œ cssë§Œ í˜¸ì¶œí•˜ì˜€ìŠµë‹ˆë‹¤.
```html</li>
</ol>
<th:block th:fragment="fragment-footer">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="/js/app/index.js"></script>
</th:block>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>thymeleafë¥¼ ì‚¬ìš©í•œ footerì…ë‹ˆë‹¤. headerì™€ ë™ì¼í•œ ëª©ì ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ìœ„ì™€ ê°™ì´ ë§Œë“  fragmentëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í• ê¹Œìš”?

ë°”ë¡œ ë¶ˆëŸ¬ì˜¤ê³  ì‹¶ì€ ì˜ì—­ì— `th:replace`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ 
```html
&lt;div th:replace="fragments/footer.html :: fragment-footer"&gt;&lt;/div&gt;
1. (resourceê°€ ë£¨íŠ¸), fragments ë””ë ‰í† ë¦¬ ì•„ë˜ì˜ footer.htmlíŒŒì¼ì„ ì§€ì •í•©ë‹ˆë‹¤.
2. footer.html íŒŒì¼ì—ì„œ fragment-footerë¼ê³  ì§€ì •í•œ ì˜ì—­ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
</code></pre></div></div>
<p>ì´ì œ htmlê³¼ cssíŒŒì¼ì€ ì¤€ë¹„ê°€ ëìŠµë‹ˆë‹¤.</p>

<h3 id="ìš”ì²­ì„-ë³´ë‚´ê¸°-ìœ„í•œ-jsíŒŒì¼">ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•œ jsíŒŒì¼</h3>
<p>ìœ„ì™€ ê°™ì´ í™”ë©´ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì€ ê²°êµ­ ì‚¬ìš©ìê°€ ì„œë²„ì— ìš”ì²­ì„ í•˜ê¸° ìœ„í•¨ ì…ë‹ˆë‹¤.</p>

<p>ì‚¬ìš©ìê°€ ìš”ì²­ì„ í•˜ê¸° ìœ„í•œ jsíŒŒì¼ì„ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">main</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">init</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#btn-save</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">_this</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">},</span>
    <span class="na">save</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#title</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
            <span class="na">author</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#author</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
            <span class="na">content</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#content</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="p">};</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
            <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/api/v1/posts</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">dataType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">contentType</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json; charset=utf-8</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
        <span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
            <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.</span><span class="dl">'</span><span class="p">);</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/view/</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">main</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ jsíŒŒì¼ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>

<p><img src="../assets/img/230122/example.jpg" alt="example1" /></p>

<p>ìœ„ì™€ ê°™ì€ íŒ¨í‚¤ì§€ ìš”êµ¬ì‚¬í•­ì´ ìˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">IntelliJ</code>ì—ì„œ ì–´ë–»ê²Œ íŒ¨í‚¤ì§€ ìƒì„±ì„ í•˜ì‹œê² ë‚˜ìš”?</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. static/js/app
2. static.js.app
</code></pre></div></div>
<p>ì €ê°™ì€ ê²½ìš° 2ë²ˆìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì‘ì„±í•˜ì—¬ 404ì—ëŸ¬ë¥¼ ê²½í—˜í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<p>íŒ¨í‚¤ì§€ ìƒì„±ê³¼ í‘œê¸°ë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ëŠ” ì‘ì—…ì´ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ë¥¼ ë‹¤ì‹œ í•œë²ˆ ê¹¨ë‹«ì•˜ìŠµë‹ˆë‹¤.</p>

<p><img src="../assets/img/230122/example2.jpg" alt="example2" />
ìœ„ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ íŒŒì¼ì´ ì „ì†¡ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">JPA ê°œìš”ì™€ Web layer</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/20/cotatoStudy5.html" rel="alternate" type="text/html" title="JPA ê°œìš”ì™€ Web layer" /><published>2023-01-20T00:00:00+00:00</published><updated>2023-01-20T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/20/cotatoStudy5</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/20/cotatoStudy5.html"><![CDATA[<p>âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤</code>ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>
<h1 id="jpa">JPA</h1>
<p>RDBMSë¥¼ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤.</p>

<p>ì‚¬ëŒê³¼ ê±°ì£¼ì§€ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤ë©´ ì–´ë–»ê²Œ ì‘ì„±í•˜ì‹¤ê±´ê°€ìš”?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Human</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ì£¼ì†Œ</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Place</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ì£¼ì†Œ</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">ì•„íŒŒíŠ¸ëª…</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì €ë¼ë©´ ìœ„ì™€ ê°™ì€ POJOë¡œ ì‘ì„±í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.<br />
ì£¼ì†Œë¼ëŠ” Stringì´ Placeì˜ PKì´ê³  Humanì˜ FKë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê³  í…Œì´ë¸” ìƒì„±ì—ë„ í° ë¬´ë¦¬ê°€ ì—†ì–´ ë³´ì…ë‹ˆë‹¤.<br />
í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì€ í´ë˜ìŠ¤ëŠ” ì œê°€ ë†“ì¹œ ìë°”ì˜ ê¸°ë³¸ì ì¸ ì›ë¦¬ê°€ ìˆ¨ì–´ ìˆìŠµë‹ˆë‹¤.</p>

<h2 id="ê°ì²´-ì§€í–¥-í”„ë¡œê·¸ë˜ë°">ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°</h2>
<p>ë°”ë¡œ ê°ì²´ ì§€í–¥ì ì¸ í”„ë¡œê·¸ë˜ë°ì…ë‹ˆë‹¤. ìœ„ì™€ ê°™ì€ í”„ë¡œê·¸ë˜ë°ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë¬¸ì œëŠ” ë‘ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<ol>
  <li>í´ë˜ìŠ¤ë¥¼ ë‹¨ìˆœíˆ ë°ì´í„° ê·¸ë¦‡ìœ¼ë¡œë§Œ ì‚¬ìš©í•œë‹¤.</li>
  <li>í´ë˜ìŠ¤ë¥¼ í…Œì´ë¸”ì— ë§ì¶”ëŠ” ê¸°í˜•ì ì¸ ì„¤ê³„ê°€ ë‚˜íƒ€ë‚œë‹¤.</li>
</ol>

<p>Javaë¥¼ ì‚¬ìš©í•˜ê³  ê°ì²´ ì§€í–¥ì ì¸ í”„ë¡œê·¸ë˜ë°ì„ í•œë‹¤ë©´ ê°ì²´ì˜ í–‰ë™ê³¼ ì˜ë¯¸ê°€ ì˜ ë“¤ì–´ë‚˜ì•¼í•˜ëŠ”ë° ìœ„ì™€ ê°™ì€ ì‘ì„±ì€ <em>ê°’ìœ¼ë¡œ ë‹¨ìˆœíˆ í”„ë¡œê·¸ë˜ë°</em>ì„ í• ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ 81p : ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ ë©”ì„¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê¸°ëŠ¥ê³¼ ì†ì„±ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê¸°ìˆ </p>
</blockquote>

<h2 id="jpaì˜-ë“±ì¥">JPAì˜ ë“±ì¥</h2>
<p>ê·¸ë˜ì„œ ë§ì€ ì„œë²„ ê°œë°œìë“¤ì—ê²Œ ê°ì²´ ì§€í–¥ì ì¸ í”„ë¡œê·¸ë˜ë°ì´ ê°€ëŠ¥í•˜ë„ë¡ Mappingì„ í•´ì£¼ëŠ” ORM(Obejct Relation Mapping)ì´ ë“±ì¥í•©ë‹ˆë‹¤. ë°”ë¡œ <code class="language-plaintext highlighter-rouge">JPA</code>ì…ë‹ˆë‹¤.</p>

<p>ìœ„ ê¸°ìˆ ì„ í†µí•´ ê°ì²´ë¥¼ ê°ì²´ë‹µê²Œ ë‹¤ë£° ìˆ˜ ìˆê³  DBì— ë”°ë¥¸ SQLì˜ì¡´ë„ë„ ë‚®ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì¸í„°í˜ì´ìŠ¤ì™€ ê°™ì´ ê°ì²´ê°€ ë‹¬ë¼ì§€ë”ë¼ë„ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ implementí•œë‹¤ë©´ êµì²´ê°€ ìš©ì´í•˜ë‹¤ëŠ” ì ì„ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<p>ìƒì„¸í•œ JPA ë¬¸ë²•ì€ ë‹¤ìŒì— ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>

<h2 id="web-ê³„ì¸µ">Web ê³„ì¸µ</h2>
<p>ì´ì œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ì‹œì‘í•˜ëŠ” ë²•, DBì™€ ì†Œí†µí•˜ëŠ” ë²•ì„ ì•Œì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë˜ ë‹¤ë¥¸ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
  <p>í´ë˜ìŠ¤, íŒ¨í‚¤ì§€ëª…ì„ ì–´ë–»ê²Œ ì •í•´ì•¼ í•˜ëŠ”ê°€?</p>
</blockquote>

<p>APIë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë°ì´í„° êµí™˜ì„ ìœ„í•œ DTO í´ë˜ìŠ¤, API ìš”ì²­ì„ ë°›ëŠ” Controller, íŠ¸ëœì­ì…˜ ë° ë„ë©”ì¸ ë¡œì§ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ëŠ” Service ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>

<ul>
  <li>ê¸°ì¡´ì— í´ë˜ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¸ìë¥¼ ì‘ì„±í–ˆë‹¤ë©´ DTO í´ë˜ìŠ¤ë¥¼ í†µí•´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ì•„ì„œ êµí™˜ì„ í•©ë‹ˆë‹¤.</li>
  <li>Controllerì¼ ê²½ìš° MVC íŒ¨í„´ê³¼ ë¹„ìŠ·í•˜ê²Œ ìš”ì²­ì„ ë°›ê³  ê·¸ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.</li>
  <li>ServiceëŠ” íŠ¸ëœì­ì…˜ ë° ë„ë©”ì¸ì˜ ìˆœì„œë¥¼ ê²°ì •í•  ë¿ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    <ul>
      <li>ServiceëŠ” ìˆœì„œë§Œ ë³´ì¥í•©ë‹ˆë‹¤. ì‹¤ì œ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì€ Domainì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ul>

<p>í”„ë¡œì íŠ¸ì—ì„œ ì˜¤ë¥˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œ ê¸°ëŠ¥ì˜ ì—­í• ì„ ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Web : ì™¸ë¶€ì˜ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì „ë°˜ì ì¸ ì˜ì—­

Service : Controllerì™€ Daoì˜ ì¤‘ê°„ ì˜ì—­, @Transactionì´ ì‚¬ìš©ë˜ëŠ” ì˜ì—­

Repository : Databaseì— ì ‘ê·¼í•˜ëŠ” ì˜ì—­

DTO : ê³„ì¸µê°„ì˜ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´

Domain Model : ê°œë°œ ëŒ€ìƒì„ ë‹¨ìˆœí™” ì‹œí‚¨ê²ƒ
</code></pre></div></div>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤. JPA RDBMSë¥¼ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤.]]></summary></entry><entry><title type="html">JVM ì•Œì•„ë³´ê¸°</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/19/cotatoStudy4.html" rel="alternate" type="text/html" title="JVM ì•Œì•„ë³´ê¸°" /><published>2023-01-19T00:00:00+00:00</published><updated>2023-01-19T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/19/cotatoStudy4</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/19/cotatoStudy4.html"><![CDATA[<h2 id="jvm-ê°œìš”">JVM ê°œìš”</h2>
<p>Javaë¥¼ ê³µë¶€í•˜ë©° ë§ì´ ë“¤ì–´ë³¸ JVM, JVMì€ ë¬´ì—‡ì´ê³  ì–´ë–»ê²Œ ì»´í“¨í„°ì— Java í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì¼ê¹Œ?</p>

<p>JVMì€ ê°€ìƒ ë¨¸ì‹ ì´ë©° java í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•œ <code class="language-plaintext highlighter-rouge">ëŸ°íƒ€ì„</code>ì„ ì œê³µí•œë‹¤.</p>
<blockquote>
  <p>ëŸ°íƒ€ì„ : ì»´í“¨í„° í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë™ì•ˆì˜ ë™ì‘ - wikipedia</p>
</blockquote>

<p>Java ì†ŒìŠ¤ì½”ë“œëŠ” CPUê°€ ì¸ì‹í•˜ì§€ ëª»í•˜ë¯€ë¡œ ê¸°ê³„ì–´ê°€ ì»´íŒŒì¼ì„ í•´ì•¼í•œë‹¤.</p>

<ol>
  <li>JavaëŠ” JVMì„ ê±°ì³ OSì— ë„ë‹¬í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">Java bytecode</code>ì¸ .class íŒŒì¼ë¡œ ë³€í™˜ëœë‹¤.
    <ul>
      <li>javaëŠ” Managed Codeì´ê¸° ë•Œë¬¸ì´ë‹¤.</li>
    </ul>
  </li>
  <li>bytecode(class)íŒŒì¼ì€ ê¸°ê³„ì–´ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— OSì—ì„œ ë°”ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
    <ul>
      <li>JVMì´ OSê°€ bytecodeë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•´ì„í•´ì¤€ë‹¤.</li>
      <li>ìœ„ì™€ ê°™ì€ ê³¼ì •ì´ Javaê°€ OSì— ì¢…ì†ì ì´ì§€ ì•Šì€ íŠ¹ì§•ì„ ë§Œë“ ë‹¤.</li>
    </ul>
  </li>
</ol>

<h2 id="jvmì˜-êµ¬ì„±-ìš”ì†Œ">JVMì˜ êµ¬ì„± ìš”ì†Œ</h2>
<ul>
  <li>Class Loader : JVMìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ì—­í• , bytecode ê²€ì¦ê³¼ Java security modelì— ìœ„ë°˜ ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
    <ul>
      <li>bytecodeê°€ ìˆì–´ì•¼ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë‹ˆê¹Œ classë¥¼ load í•œë‹¤.</li>
      <li>Java ë³´ì•ˆ ëª¨ë¸ : JVMì´ ë¬´ê²°ì„±ì„ ìƒì§€ ì•Šê³  í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•˜ëŠ” ëª¨ë¸</li>
    </ul>
  </li>
  <li>Execution Engine : bytecode ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ì±…ì„ì´ ìˆê³  <code class="language-plaintext highlighter-rouge">interpreter</code>ë¥¼ í¬í•¨í•œë‹¤.(bytecode ëª…ë ¹ì–´ë¥¼ í•œ ì¤„ì”© í•´ì„), JIT ì»´íŒŒì¼ëŸ¬ê°€ ì¡´ì¬.
    <ul>
      <li>JIT ì»´íŒŒì¼ëŸ¬ : ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì»´í“¨í„° í”„ë¡œì„¸ì„œê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë¡œ ë°”ê¾¸ëŠ” ì»´íŒŒì¼ëŸ¬</li>
      <li>interpreterê°€ ëª…ë ¹ì–´ë¡œ í•´ì„í•˜ë©´ JITê°€ ë°”ë¡œ ê¸°ê³„ì–´ë¡œ ì»´íŒŒì¼í•˜ì—¬ ì‹¤í–‰ ì†ë„ë¥¼ ë†’ì¸ë‹¤.
        <ul>
          <li>ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¶€ë¶„ë§Œ ì»´íŒŒì¼í•˜ì—¬ ì†ë„ë¥¼ ë†’ì¸ë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Memory Management : í”„ë¡œê·¸ë¨ì˜ ê°ì²´ì™€ ë³€ìˆ˜ì— ëŒ€í•œ í• ë‹¹ê³¼ í•´ì œë¥¼ í•œë‹¤.</li>
  <li>Thread Support : ë‹¤ì¤‘ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</li>
  <li>Native Interface : Java í”„ë¡œê·¸ë¨ì´ Native Codeë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ Native Codeê°€ Java í”„ë¡œê·¸ë¨ì„ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤.
    <ul>
      <li>Native Code : ì»´í“¨í„° ê¸°ê³„ì–´ë¡œ ë™ì‘í•˜ëŠ” ì½”ë“œ, OSì— ì˜í•´ ì§ì ‘ì ìœ¼ë¡œ ì»´íŒŒì¼ ë˜ëŠ” ì½”ë“œ. ì»´í“¨í„°ì—ì„œ ì‘ì„±ëœ ê·¸ëŒ€ë¡œ ë™ì‘í•œë‹¤. ex) Cì–¸ì–´</li>
      <li>Managed Code : Native ì½”ë“œì™€ ë°˜ëŒ€, êµ¬ë™ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì¸í„°í”„ë¦¬í„°ë¼ëŠ” ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì´ ìš”êµ¬ëœë‹¤. ex) Java
        <ul>
          <li>ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ì„±ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìƒê°í•˜ë©´ ëœë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Security Manager : ìœ„ì—ì„œ ì–¸ê¸‰í•œ Java ë³´ì•ˆ ëª¨ë¸ì„ í†µí•´ ê²€ì‚¬í•˜ëŠ” ì—­í• .
    <h2 id="jitì™€-interpreterì˜-ì°¨ì´">JITì™€ interpreterì˜ ì°¨ì´</h2>
    <p>Execution Engineì—ì„œ ì¸í„°í”„ë¦¬í„°ì™€ JIT ì»´íŒŒì¼ëŸ¬ëŠ” bytecodeë¥¼ í•´ì„í•˜ëŠ” ë©´ì—ì„œ ì°¨ì´ê°€ ì—†ì–´ ë³´ì¸ë‹¤. ë‘ ë¹„ìŠ·í•´ ë³´ì´ëŠ” ê¸°ëŠ¥ ì‚¬ì´ì— ì–´ë–¤ ì°¨ì´ê°€ ì¡´ì¬í• ê¹Œ?</p>
  </li>
</ul>

<blockquote>
  <p>interpreterëŠ” bytecodeë¥¼ ë°”ë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°˜ë©´ JIT ì»´íŒŒì¼ëŸ¬ëŠ” byteì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë²ˆì—­í•œë‹¤.</p>
</blockquote>

<p>ìœ„ì™€ ê°™ì€ ì°¨ì´ë¡œ JIT ì»´íŒŒì¼ëŸ¬ê°€ ê¸°ê³„ì–´ë¡œ ë²ˆì—­í•œ ê²ƒì´ ìƒëŒ€ì ìœ¼ë¡œë¹ ë¥´ê³  interpreterë¡œ ë²ˆì—­í•˜ë©° ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¬ë‹¤.</p>

<p><strong><em>ê·¸ëŸ¬ë©´ JIT ì»´íŒŒì¼ëŸ¬ë¡œ bytecodeë¥¼ ë²ˆì—­í•´ì„œ ì‚¬ìš©í•˜ë©´ ì†ë„ë„ ë¹ ë¥´ê³  ì¢‹ì€ë°?</em></strong></p>

<p>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  í˜„ì¬ê¹Œì§€ë„ interpreterê°€ ëŒ€ë¶€ë¶„ì˜ ì‹¤í–‰ì„ ë‹´ë‹¹í•˜ê³  JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì‹¤í–‰ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ê¸°ê³„ì–´ë¡œ ë²ˆì—­í•´ ì„±ëŠ¥ì„ ì˜¬ë¦¬ê³  ìˆë‹¤.</p>

<h2 id="jvmì´-í”„ë¡œê·¸ë¨ì„-ì‹¤í–‰ì‹œí‚¤ëŠ”-ê³¼ì •">JVMì´ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ê³¼ì •</h2>
<p><img src="../assets/img/230119/compile.png" alt="test" /></p>

<ol>
  <li>JVMì€ ë©”ëª¨ë¦¬ì— í”„ë¡œê·¸ë¨ì„ ë¨¼ì € ë¡œë“œí•œë‹¤.
    <ul>
      <li>ì´í›„ bytecodeì— ì—ëŸ¬ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ê²€ì¦í•œë‹¤.</li>
      <li>ë˜í•œ JVMì€ í”„ë¡œê·¸ë¨ì˜ ê°ì²´ì™€ ë³€ìˆ˜ì— ëŒ€í•œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•œë‹¤.(Heap)</li>
    </ul>
  </li>
  <li>JVMì´ bytecode ëª…ë ¹ì–´ë¥¼ í”„ë¡œê·¸ë¨ì˜ main ë©”ì†Œë“œì™€ í•¨ê»˜ ì‹¤í–‰í•œë‹¤.
    <ul>
      <li>í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ JVMì€ í”„ë¡œê·¸ë¨ì˜ ë©”ëª¨ë¦¬ì™€ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤.
        <ul>
          <li>í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ê°ì²´, ìŠ¤ë ˆë“œì— ëŒ€í•œ ë©”ëª¨ë¦¬, ë¦¬ì†ŒìŠ¤ ë“±</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h2 id="garbage-collector">Garbage Collector</h2>
<p>JVMì˜ êµ¬ì„±ìš”ì†Œ ì¤‘ memory managementëŠ” <code class="language-plaintext highlighter-rouge">ê°€ë¹„ì§€ ì»¬ë ‰í„°</code>ì™€ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>

<p>ê°€ë¹„ì§€ ì»¬ë ‰í„° : ìë™ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì—ì„œ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ëŠ” ì—­í• , ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì™€ íš¨ìš¸ì ì¸ ì‘ë™ì„ ë„ì™€ì¤€ë‹¤.</p>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[JVM ê°œìš” Javaë¥¼ ê³µë¶€í•˜ë©° ë§ì´ ë“¤ì–´ë³¸ JVM, JVMì€ ë¬´ì—‡ì´ê³  ì–´ë–»ê²Œ ì»´í“¨í„°ì— Java í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì¼ê¹Œ?]]></summary></entry><entry><title type="html">Stream ë¬¸ë²• ì•Œì•„ë³´ê¸°</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/16/cotatoStudy3.html" rel="alternate" type="text/html" title="Stream ë¬¸ë²• ì•Œì•„ë³´ê¸°" /><published>2023-01-16T00:00:00+00:00</published><updated>2023-01-16T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/16/cotatoStudy3</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/16/cotatoStudy3.html"><![CDATA[<h2 id="stream-ê°œìš”">Stream ê°œìš”</h2>
<p>Streamì€ java8ì—ì„œ ë¶€í„° ì‹œì‘ëœ Collection, Arrayë“± ì €ì¥ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ì°¸ì¡°í•˜ë©° í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤(Lambda)ë¥¼ ì ìš©í•˜ì—¬ ë°˜ë³µì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p>

<p>I/O Streamì´ ì•„ë‹Œ ì €ì¥ ìš”ì†Œì˜ Stream</p>

<h3 id="ì™œ-ì´ê±¸-ì‚¬ìš©í•˜ëŠ”-ê±°ì£ ">ì™œ ì´ê±¸ ì‚¬ìš©í•˜ëŠ” ê±°ì£ ?</h3>
<ol>
  <li>ë‹¨ìˆœíˆ forë¬¸ì„ ëŒ€ì‹ í•˜ëŠ” ê²Œ ì•„ë‹Œ forë¬¸ì˜ ë°˜ë³µ í–‰ìœ„ë§Œ ëŒ€ì‹ í•œë‹¤.
    <ul>
      <li>forë¬¸ì„ ëŒ€ì‹ í•˜ëŠ” ê²ƒë§Œ ì•„ë‹Œ ë‹¤ë¥¸ ê¸°ëŠ¥(ëŒ€ì†Œë¹„êµ, ë§¤ì¹­ ë“±ë“±)ì„ ê°™ì´ ìˆ˜í–‰</li>
    </ul>
  </li>
  <li>í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ ê°€ëŠ¥í•˜ë‹¤.
    <ul>
      <li>íŒŒì´í”„ë¼ì¸ êµ¬ì¡°ë¡œ ì§ê´€ì ì¸ í”„ë¡œê·¸ë˜ë°ì´ ê°€ëŠ¥</li>
    </ul>
  </li>
</ol>

<p>ìœ„ì™€ ê°™ì€ ì¥ì ìœ¼ë¡œ ë§ì€ Java ê°œë°œìê°€ Stream APIë¥¼ ì‚¬ìš©í•œë‹¤.</p>

<h3 id="ê¸°ë³¸ì ì¸-êµ¬ì„±">ê¸°ë³¸ì ì¸ êµ¬ì„±</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ê°ì²´ì§‘í•©(Collection).ìŠ¤íŠ¸ë¦¼ìƒì„±().ì¤‘ê°œì—°ì‚°().ìµœì¢…ì—°ì‚°();
</code></pre></div></div>
<p>ìŠ¤íŠ¸ë¦¼ ìƒì„±ë²•</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(){</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"A"</span><span class="o">,</span> <span class="s">"B"</span><span class="o">,</span> <span class="s">"C"</span><span class="o">);</span>
    <span class="n">users</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>

    <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">};</span>
    <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>

    <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì¤‘ê°œ ì—°ì‚°ë°©ë²•</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(){</span>
    <span class="c1">//Filter ì‚¬ìš©ë²•</span>
        <span class="c1">// ì¡°ê±´ì— ë§ëŠ” ìš”ì†Œ</span>
    <span class="kt">int</span> <span class="n">check</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">users</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">h</span><span class="o">-&gt;</span><span class="n">h</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"C"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">count</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í•„í„°ë§ : "</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>
    <span class="c1">//Map ì‚¬ìš©ë²•</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">5000</span><span class="o">)</span><span class="c1">//intí˜• ìë£Œì— ëŒ€í•œ ì—°ì‚°</span>
            <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"5000ì„ ë”í•´ "</span> <span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s">"ë¥¼ ì¶œë ¥í•˜ì"</span><span class="o">));</span><span class="c1">//ë°˜ë³µë¬¸</span>
        
        <span class="c1">// ì›í•˜ëŠ” ì»¬ë ‰ì…˜ í˜•íƒœë¡œ íŒŒì‹±í•˜ê¸°</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">newList</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">+</span><span class="mi">2000</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">boxed</span><span class="o">()</span>
                                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="c1">//sort</span>
    <span class="kt">int</span> <span class="n">a</span><span class="o">[]</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">toArray</span><span class="o">();</span>
    <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="c1">// ê°œìˆ˜ ì œí•œ</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"5ê°œë§Œ ì¶œë ¥-------------"</span><span class="o">);</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

    <span class="c1">//distinct</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list_1</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
            <span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="n">list_1</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ map, distinct ë“± ê¸°ëŠ¥ì„ streamì— ì ìš©í•œë‹¤.</p>

<p>ìµœì¢… ì—°ì‚°ë°©ë²•</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.forEach
.get()
.getInt()
.collect(Collectors.toList())
</code></pre></div></div>
<p>streamì„ ìœ„ì™€ ê°™ì€ ë¦¬í„´ íƒ€ì…ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.</p>

<p>ì „ì²´ ì†ŒìŠ¤ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Stream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.IntStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Comparator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StreamTester</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ì„ ì–¸ë¶€</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"A"</span><span class="o">,</span> <span class="s">"B"</span><span class="o">,</span> <span class="s">"C"</span><span class="o">);</span>
        <span class="n">users</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>

        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">};</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>

        <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">strm</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">200</span><span class="o">,</span><span class="mi">300</span><span class="o">);</span>

        <span class="c1">// í•„í„°ë§</span>
            <span class="c1">// ì¡°ê±´ì— ë§ëŠ” ìš”ì†Œ</span>
        <span class="kt">int</span> <span class="n">check</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">users</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">h</span><span class="o">-&gt;</span><span class="n">h</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"C"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">count</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í•„í„°ë§ : "</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>

            <span class="c1">// distinctí•œ ìš”ì†Œ</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list_1</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>
                <span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="n">list_1</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

        <span class="c1">// ê°œìˆ˜ ì„¸ê¸°</span>
        <span class="n">check</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">users</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">count</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ê°œìˆ˜ : "</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>

        <span class="c1">// ìµœëŒ“ê°’ ì°¾ê¸°</span>
        <span class="n">check</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">).</span><span class="na">max</span><span class="o">().</span><span class="na">getAsInt</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ìµœëŒ“ê°’ : "</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>

        <span class="c1">// ìµœì†Ÿê°’ ì°¾ê¸°</span>
        <span class="n">check</span> <span class="o">=</span> <span class="n">strm</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="n">x</span><span class="o">-&gt;</span> <span class="n">x</span><span class="o">)).</span><span class="na">get</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ìµœì†Ÿê°’ : "</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>

        <span class="c1">// í‰ê· </span>
        <span class="kt">double</span> <span class="n">dd</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">).</span><span class="na">average</span><span class="o">().</span><span class="na">getAsDouble</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í‰ê· ê°’ : "</span> <span class="o">+</span> <span class="n">dd</span><span class="o">);</span>

        <span class="c1">// ì²«ë²ˆì§¸ ìš”ì†Œ</span>
        <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">strm1</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1100</span><span class="o">,</span><span class="mi">1200</span><span class="o">,</span><span class="mi">1300</span><span class="o">);</span>
        <span class="n">check</span> <span class="o">=</span> <span class="n">strm1</span><span class="o">.</span><span class="na">findFirst</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì²«ë²ˆì§¸ ìš”ì†Œ : "</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>

        <span class="c1">// ë§¤í•‘(mapping)</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">+</span><span class="mi">5000</span><span class="o">)</span><span class="c1">//intí˜• ìë£Œì— ëŒ€í•œ ì—°ì‚°</span>
            <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"5000ì„ ë”í•´ "</span> <span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s">"ë¥¼ ì¶œë ¥í•˜ì"</span><span class="o">));</span><span class="c1">//ë°˜ë³µë¬¸</span>
        
        <span class="c1">// ì›í•˜ëŠ” ì»¬ë ‰ì…˜ í˜•íƒœë¡œ íŒŒì‹±í•˜ê¸°</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">newList</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">+</span><span class="mi">2000</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">boxed</span><span class="o">()</span>
                                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        <span class="c1">// ì‚½ì§ˆ -&gt; Collectorsê°€ Streamì˜ Collectorsì¸ë° utilì˜ Collectorë¥¼ import í–ˆë‹¤..</span>
        <span class="n">newList</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

        <span class="c1">// ëˆ„ì  í•©</span>
        <span class="n">check</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">reduce</span><span class="o">((</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)-&gt;</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">getAsInt</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ëˆ„ì  í•© :"</span> <span class="o">+</span> <span class="n">check</span><span class="o">);</span>

        <span class="c1">// ì •ë ¬</span>
        <span class="kt">int</span> <span class="n">a</span><span class="o">[]</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">numbers</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">toArray</span><span class="o">();</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
        <span class="c1">// ê°œìˆ˜ ì œí•œ</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"5ê°œë§Œ ì¶œë ¥-------------"</span><span class="o">);</span>
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">a</span><span class="o">).</span><span class="na">limit</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html</p>

<p>ìœ„ì™€ ê°™ì´ ì“°ì„ìƒˆê°€ ë§¤ìš° ë‹¤ì–‘í•˜ê³  í¸ë¦¬í•˜ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">ê³µì‹ë¬¸ì„œ</code>ë¥¼ ì°¾ì•„ ê¸°ëŠ¥ì„ ìˆ™ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>(https://jeong-pro.tistory.com/165)Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[Stream ê°œìš” Streamì€ java8ì—ì„œ ë¶€í„° ì‹œì‘ëœ Collection, Arrayë“± ì €ì¥ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ì°¸ì¡°í•˜ë©° í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤(Lambda)ë¥¼ ì ìš©í•˜ì—¬ ë°˜ë³µì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥1 (https://jeong-pro.tistory.com/165)Â &#8617;]]></summary></entry><entry><title type="html">ìŠ¤í”„ë§ì˜ ê°œìš” ì•Œì•„ë³´ê¸°</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/12/cotatoStudy.html" rel="alternate" type="text/html" title="ìŠ¤í”„ë§ì˜ ê°œìš” ì•Œì•„ë³´ê¸°" /><published>2023-01-12T00:00:00+00:00</published><updated>2023-01-12T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/12/cotatoStudy</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/12/cotatoStudy.html"><![CDATA[<h2 id="what-is-spring-boot">What is Spring Boot</h2>

<p>ìš”ì¦˜ ë§ì€ ì‚¬ëŒì´ íŒŒì´ì¬ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë°ì„ í•©ë‹ˆë‹¤.<br />
ê·¸ëŸ¼ì—ë„ ì„œë²„ ì‚¬ì´ë“œì—ì„œ ë§ì´ ì“°ì´ëŠ” ì–¸ì–´ì™€ í”„ë ˆì„ì›Œí¬ëŠ” <code class="language-plaintext highlighter-rouge">JAVA</code>ì™€ <code class="language-plaintext highlighter-rouge">Spring</code>ì´ë‹¤.<br />
Springì€ ì–´ë– í•œ ê°•ì ì´ ìˆê¸° ë•Œë¬¸ì— ë§ì€ ì„œë²„ ê°œë°œìë“¤ì´ ìŠ¤í”„ë§ì„ ì„ íƒí•˜ëŠ” ê²ƒì¼ê¹Œ?</p>

<h3 id="1-aop">1. AOP</h3>
<p>ìŠ¤í”„ë§ì€ ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p>ì–´ë–¤ ë¡œì§ì„ ê¸°ì¤€ìœ¼ë¡œ í•µì‹¬ì ì¸ ê´€ì , ë¶€ê°€ì ì¸ ê´€ì ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ë³´ê³  ê·¸ ê´€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ê°ê° ëª¨ë“ˆí™” í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p>

<p>í©ì–´ì§„ ê´€ì‹¬ì‚¬(Crosscutting Concerns)ë¼ëŠ” ê°œë…ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.</p>

<p>ìœ„ ê°œë…ì€ ì†ŒìŠ¤ ì½”ë“œ ìƒì—ì„œ <code class="language-plaintext highlighter-rouge">ë°˜ë³µì ìœ¼ë¡œ ì“°ì´ëŠ” ì½”ë“œë¥¼ ëª¨ë“ˆí™”</code> í•˜ëŠ” í–‰ìœ„ì¸ë° ì´ ë°©ë²•ì„ í†µí•´ íš¨ìœ¨ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ì¬ì‚¬ìš©</code>í•˜ëŠ” í”„ë¡œê·¸ë˜ë°ì„ ë§í•œë‹¤.</p>

<ul>
  <li>í”„ë¡ì‹œ ê¸°ë°˜ AOP êµ¬í˜„ì²´</li>
  <li>ìŠ¤í”„ë§ Beanì— AOP ì ìš©</li>
  <li>ìŠ¤í”„ë§ IoC(ì œì–´ ì—­ì „)ì™€ ì—°ë™</li>
</ul>

<h3 id="2-di-ioc">2. DI, IoC</h3>
<p>Dependency Injection(ì˜ì¡´ ê´€ê³„ ì£¼ì…)</p>

<p>ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">ì™¸ë¶€ì—ì„œ ìƒì„±í•œ í›„ ì£¼ì…</code>ì‹œí‚¤ëŠ” ë°©ì‹ì´ë‹¤.</p>

<p>ex) setterë¥¼ í†µí•œ ì£¼ì…</p>

<p>IoCëŠ” ì œì–´ ì—­ì „ì´ë¼ê³  ë§í•˜ë©° ë§ ê·¸ëŒ€ë¡œ <code class="language-plaintext highlighter-rouge">ì œì–´ì˜ íë¦„ì„ ë°”ê¾¼ë‹¤.</code></p>

<p>ê°ì²´ì˜ ì˜ì¡´ì„±ì„ ì—­ì „ì‹œì¼œ ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ì¤„ì´ê³  ê°€ë…ì„± ë° ì½”ë“œì˜ ì¤‘ë³µ, ìœ ì§€ë³´ìˆ˜ë¥¼ í¸í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></p>

<table>
  <thead>
    <tr>
      <th>ê¸°ì¡´ ê°ì²´ ìƒì„± ìˆœì„œ</th>
      <th>ìŠ¤í”„ë§ì˜ ê°ì²´ ìƒì„± ìˆœì„œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1. ê°ì²´ ìƒì„±</td>
      <td>1. ê°ì²´ ìƒì„±</td>
    </tr>
    <tr>
      <td>2. ì˜ì¡´ì„± ê°ì²´ ìƒì„±</td>
      <td>2. ì˜ì¡´ì„± ê°ì²´ <code class="language-plaintext highlighter-rouge">ì£¼ì…</code></td>
    </tr>
    <tr>
      <td>3. ì˜ì¡´ì„± ê°ì²´ ë©”ì†Œë“œ í˜¸ì¶œ</td>
      <td>3. ì˜ì¡´ì„± ê°ì²´ ë©”ì†Œë“œ í˜¸ì¶œ</td>
    </tr>
  </tbody>
</table>

<p>ìœ„ì˜ í‘œì™€ ê°™ì´ ìŠ¤í”„ë§ì´ ëª¨ë“  ì˜ì¡´ì„± ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì£¼ê³  í•„ìš”í•œ ê³³ì— ì£¼ì…í•œë‹¤.</p>

<p>ìŠ¤í”„ë§ì—ì„œëŠ” ê°ì²´ë¥¼ Beanìœ¼ë¡œ ë¶€ë¥´ê³  Beanì„ ê´€ë¦¬í•˜ëŠ” ê³µê°„ì„ Bean ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤.</p>

<p>â¡ï¸ Beanì€ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ê°€ì§€ê³  ìŠ¤í”„ë§ì´ ì œì–´ì˜ íë¦„ì„ ê°€ì ¸ê°„ë‹¤.</p>

<h3 id="3-pojoì˜¤ë˜ë˜ê³ -ê°„ë‹¨í•œ-ìë°”-ê°ì²´">3. POJO(ì˜¤ë˜ë˜ê³  ê°„ë‹¨í•œ ìë°” ê°ì²´)</h3>
<p>Java EE -&gt; ì‚¬ìš©í•˜ê¸° ê°„í¸í•˜ì§€ë§Œ ì¤‘ëŸ‰ì˜ í”„ë ˆì„ ì›Œí¬ì´ê³ </p>

<p>javaì˜ í•µì‹¬ì´ ê°ì²´ ì§€í–¥ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  íŠ¹ì • ê¸°ìˆ , í™˜ê²½ì— ì¢…ì†ë˜ì–´ ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜, í™•ì¥ì„±ì´ ëª¨ë‘ ë–¨ì–´ì§€ëŠ”(ê°ì²´ì§€í–¥ì„±ì´ ê°ì†Œí•˜ëŠ”) í˜„ìƒì„ ë¹„íŒí•˜ê¸° ìœ„í•œ ê°œë…<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup></p>

<p>ì•„ë˜ì™€ ê°™ì€ í´ë˜ìŠ¤ê°€ POJOì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Human</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">(){</span><span class="k">return</span> <span class="n">name</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAge</span><span class="o">(){</span><span class="k">return</span> <span class="n">age</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">){</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAge</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">){</span><span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">Hibernate</code>ê°€ ë°”ë¡œ POJOê¸°ë°˜ì˜ Persistence í”„ë ˆì„ì›Œí¬ì´ë‹¤.</p>

<p>í•˜ì´ë²„ë„¤ì´íŠ¸ë¥¼ ìƒê°í•´ë³´ë©´ ì–´ë–¤ DBì— ì¢…ì†í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” íŠ¹ì§•ì´ ë°”ë¡œ ë– ì˜¤ë¦…ë‹ˆë‹¤.</p>

<p>ë˜í•œ JPAê°€ ë§¤ìš° ê°ì²´ ì§€í–¥ì ì¸ ì„±ì§ˆì„ ê°€ì§„ë‹¤ëŠ” ê²ƒì„ ë– ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤.</p>

<h3 id="spring-vs-spring-boot">Spring vs Spring Boot</h3>
<p>ê·¸ë ‡ë‹¤ë©´ ìŠ¤í”„ë§ê³¼ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë¬´ìŠ¨ ì°¨ì´ê°€ ìˆì„ê¹Œìš”?</p>

<p>ìŠ¤í”„ë§ì€â€¦</p>
<ol>
  <li>sub-frameworksì˜ ì´ì²´
    <ul>
      <li>AOP, ORM, Web Flow, Web MVC..ë“± ì—¬ëŸ¬ ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì§</li>
    </ul>
  </li>
  <li>POJO, DI ë“± enterprise applicationì„ ê°œë°œí•˜ëŠ”ë° ìµœì í™”ë¨</li>
  <li>ê¸°ì¡´ classic Java frameworksì™€ APIs(JDBC, JSP, Java Servlet)ë³´ë‹¤ ì‰¬ìš´ ê°œë°œ</li>
</ol>

<p>ë“±ë“±ì˜ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ”â€¦</p>
<ol>
  <li>ì „í†µì ì¸ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ìœ„ì— ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
    <ul>
      <li>ì¦‰ ìŠ¤í”„ë§ì˜ ëª¨ë“  íŠ¹ì§•ì„ ê°€ì§€ë©° ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” <code class="language-plaintext highlighter-rouge">ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤</code> ê¸°ë°˜ í”„ë ˆì„ì›Œí¬ì´ê³  ë¹ ë¥¸ ì‹œê°„ì— ê°œë°œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
  <li>ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ëª¨ë“  ê²ƒì€ <code class="language-plaintext highlighter-rouge">ìë™ìœ¼ë¡œ ì„¤ì •</code>ë©ë‹ˆë‹¤.</li>
</ol>

<p>(micro service architecture) : <code class="language-plaintext highlighter-rouge">ê°ê°ì„ ë§ˆì´í¬ë¡œí•˜ê²Œ ë‚˜ëˆˆ ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ì—°ê²°í•œ êµ¬ì¡°</code></p>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ì˜ ì¥ì ì„ ê°€ì§€ë©° ë”ìš± ê°„ë‹¨í•˜ê³  ë¹ ë¥´ê²Œ ê°œë°œì„ í•˜ê¸° ìœ„í•´</code> ì…ë‹ˆë‹¤.</p>

<h2 id="what-is-gradle">What is Gradle?</h2>
<p>ì´ì œ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì–¼ë§ˆë‚˜ ì¢‹ì€ ê°•ì ì´ ìˆëŠ”ì§€ ì•Œê² ìŠµë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">IntelliJ</code>ë¼ëŠ” ê°œë°œí™˜ê²½ì—ì„œ ì²« í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ë ¤ê³  í•˜ëŠ”ë°â€¦</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>í”„ë¡œì íŠ¸ ì˜µì…˜ : 
Maven, Gradle, Ant
</code></pre></div></div>
<p>ìœ„ ì˜µì…˜ë“¤ì€ ë¬´ì—‡ì´ê³  ì–´ë– í•œ ì°¨ì´ê°€ ìˆì„ê¹Œìš”?<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup></p>

<h3 id="ë¹Œë“œ-ë„êµ¬ë“¤ì˜-ë“±ì¥">ë¹Œë“œ ë„êµ¬ë“¤ì˜ ë“±ì¥</h3>
<p>python, jsë¥¼ ì‚¬ìš©í•´ë³¸ ì‚¬ëŒì´ë¼ë©´ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì ì‹œ ë– ì˜¬ë ¤ ë³´ì.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>numpy
npm <span class="nb">install </span>axios
</code></pre></div></div>
<p>pip, npmë“± ì´ ë– ì˜¤ë¥¸ë‹¤. ê·¸ë ‡ë‹¤ë©´ javaëŠ” ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í• ê¹Œ?<br />
ì´ë•Œ Mavenê³¼ Gradleì˜ í•„ìš”ì„±ì´ ì§ì‘ì´ ê°„ë‹¤.</p>

<p>Mavenê³¼ Gradleì˜ íŠ¹ì§•í‘œ<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup></p>

<table>
  <thead>
    <tr>
      <th>|</th>
      <th>Maven</th>
      <th>Gradle</th>
      <th>Â </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Â </td>
      <td>íŠ¹ì§•</td>
      <td>ì˜¤í”ˆì†ŒìŠ¤ ë¹Œë“œ ë„êµ¬(ì•ˆì •ì„±ì— ì§‘ì¤‘)</td>
      <td>ì˜¤í”ˆì†ŒìŠ¤ ë¹Œë“œ ë„êµ¬</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>ì‘ë™</td>
      <td>XMLì„ í†µí•´ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ìƒì„±</td>
      <td>Javaì™€ Groovyê¸°ë°˜ DSLë¡œ ì‘ë™í•œë‹¤.</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>ëª©ì </td>
      <td>í•œì •ëœ ì‹œê°„ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ê²ƒì— ì´ˆì </td>
      <td>ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì— ì´ˆì </td>
    </tr>
    <tr>
      <td>Â </td>
      <td>ì„±ëŠ¥</td>
      <td>ëŠë¦¬ê³ , ì„ì‹œíŒŒì¼ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤</td>
      <td>mavenë³´ë‹¤ ë¹ ë¥´ê³  í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì‘ì—…ì— ì´ˆì </td>
    </tr>
    <tr>
      <td>Â </td>
      <td>ë³µì¡ë„</td>
      <td>ë³µì¡í•˜ë‹¤</td>
      <td>ë‹¨ìˆœí•˜ë‹¤</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ</td>
      <td>customizableí•˜ì§€ ì•Šê³  ì†Œìˆ˜ì˜ IDEì—ë§Œ ê¸°ëŠ¥ ì œê³µ</td>
      <td>customizableí•˜ê³  ë‹¤ì–‘í•œ IDEì§€ì›</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>ì§€ì›ì–¸ì–´</td>
      <td>Java, Scalar, C#, ë£¨ë¹„ ê°œë°œì„ ì§€ì›</td>
      <td>Java, C, C++, Groovyì— ê°œë°œ ì§€ì›</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Groovy -&gt; Javaì— íŒŒì´ì¬, ë£¨ë¹„, ìŠ¤ëª°í† í¬ ë“±ì˜ íŠ¹ì§•ì„ ë”í•œ ë™ì  ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì–¸ì–´
DSL -&gt; ì´ ë³¸ë¬¸ì—ì„œëŠ” Digital Subscriber Lineì´ ì•„ë‹Œ 
    Domain specific languageë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë„ë©”ì¸ì„ ëª…ì‹œí•˜ëŠ”ë° íŠ¹í™”ëœ ì–¸ì–´.
    GPL(general purpose language)ì™€ ì •ë°˜ëŒ€ë˜ëŠ” ì„±ê²©ì„ ê°€ì§„ë‹¤.
    ex) Javaì—ì„œëŠ” ANT, Maven, HQL
        SQL, CSS, ì •ê·œì‹, Make...
        HTMLë„ ë„ë©”ì¸ íŠ¹í™” ì–¸ì–´ì´ë‹¤.
GPL ì˜ˆì‹œ : java, C(java, CëŠ” í•˜ë‚˜ì˜ ë„ë©”ì¸ì—ë§Œ ì–½í˜€ìˆì§€ ì•ŠëŠ”ë‹¤.)

ì˜ì¡´ì„± : í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬.
</code></pre></div></div>
<h2 id="pluginì€-ë¬´ì—‡ì¸ê°€ìš”">Pluginì€ ë¬´ì—‡ì¸ê°€ìš”?</h2>

<p>Gradleì˜ íŠ¹ì§•ì¤‘ í•˜ë‚˜ê°€ ë– ì˜¤ë¦…ë‹ˆë‹¤.<br />
ë˜í•œ ì±…ì—ì„œ ë³¸ gradle ì¤‘ ì–´ëŠ ìš”ì†Œê°€ ë– ì˜¤ë¦…ë‹ˆë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Gradle is a tool used for creating plug-ins and is a flexible instrument.

plugins {
    id 'java'
}
</code></pre></div></div>
<blockquote>
  <p>í”ŒëŸ¬ê·¸ì¸ì€ íŠ¹ì • ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ ëª¨ì•„ë†“ì€ Taskì˜ ë¬¶ìŒì´ë‹¤.<sup id="fnref:6" role="doc-noteref"><a href="#fn:6" class="footnote" rel="footnote">6</a></sup></p>
</blockquote>

<p>ê·¸ëŸ¬ë¯€ë¡œ Gradleì—ì„œ Pluginì€ Gradle Taskì˜ ì§‘í•©ì…ë‹ˆë‹¤.</p>

<p>ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ê³¼ì •(Task)ì´ ì´ë£¨ì–´ì§„ë‹¤.</p>
<ol>
  <li>í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°›ì•„ì˜¨ë‹¤.</li>
  <li>ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ìë°” ì½”ë“œë¥¼ ì»´íŒŒì¼</li>
  <li>ì»´íŒŒì¼ëœ ë°”ì´íŠ¸ì½”ë“œì˜ ë¬¶ìŒì„ íŒ¨í‚¤ì§•</li>
</ol>

<p>ìœ„ì™€ ê°™ì€ ì‘ì—…ë“¤ì„ ì¼ì¼íˆ Gradle íŒŒì¼ì— ì •ì˜í•˜ë©´ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë‹¤. (ë§¤ë²ˆ ë¹„ìŠ·í•œ ì‘ì—…ì„ ë˜‘ê°™ì´ ì‘ì„±í•´ì•¼í•˜ê¸° ë•Œë¬¸)</p>

<p>ê·¸ë˜ì„œ IDEì—ì„œ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ìœ„ì™€ ê°™ì€ ì‘ì—…ì„ ì •ì˜í•˜ê³  ì‘ì—…ì„ GradleíŒŒì¼ì— ë“±ë¡í•œë‹¤.</p>

<blockquote>
  <p>gradlewëŠ” ë¬´ì—‡ì¸ê°€ìš”?</p>
</blockquote>

<p>gradle-wrapperì˜ ì•½ì–´ì´ë‹¤.</p>

<p>ê°œë°œìê°€ ìƒˆë¡œìš´ í™˜ê²½ì—ì„œ ê°œë°œì„ ì‹œì‘í•˜ë”ë¼ë„ gradleì„ ì„¤ì¹˜í•  í•„ìš” ì—†ì´ ë™ì¼í•œ í™˜ê²½ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë‚´ì¥ gradleì´ë‹¤.</p>

<p>ì§€ê¸ˆê¹Œì§€ Springì˜ íŠ¹ì§•ê³¼ Springì˜ êµ¬ì„±ìš”ì†Œë¥¼ ê°„ëµíˆ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

<p>ë‹¤ìŒì—ëŠ” Springì˜ êµ¬ì„±ìš”ì†Œë¥¼ ë©´ë°€íˆ ì•Œì•„ë³´ê³  Hibernateì˜ ëŒ€ëµì ì¸ ì´í•´ë¥¼ í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>https://engkimbs.tistory.com/746Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>https://velog.io/@gillog/Spring-DIDependency-InjectionÂ <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3" role="doc-endnote">
      <p>https://dev-coco.tistory.com/82Â <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4" role="doc-endnote">
      <p>https://sugerent.tistory.com/571Â <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:5" role="doc-endnote">
      <p>https://www.geeksforgeeks.org/difference-between-gradle-and-maven/Â <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:6" role="doc-endnote">
      <p>https://kotlinworld.com/323Â <a href="#fnref:6" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[What is Spring Boot]]></summary></entry><entry><title type="html">ìŠ¤í”„ë§ ë¶€íŠ¸ ìš”ì†Œì™€ í•œê¸€ ê¹¨ì§ í•´ê²°</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/12/cotatoStudy2.html" rel="alternate" type="text/html" title="ìŠ¤í”„ë§ ë¶€íŠ¸ ìš”ì†Œì™€ í•œê¸€ ê¹¨ì§ í•´ê²°" /><published>2023-01-12T00:00:00+00:00</published><updated>2023-01-12T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/12/cotatoStudy2</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2023/01/12/cotatoStudy2.html"><![CDATA[<h2 id="ìŠ¤í”„ë§-ë¶€íŠ¸-ì‹œì‘í•˜ê¸°">ìŠ¤í”„ë§ ë¶€íŠ¸ ì‹œì‘í•˜ê¸°</h2>

<p>âš ï¸ ë³¸ ê²Œì‹œë¬¼ì€ <code class="language-plaintext highlighter-rouge">ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ AWSë¡œ í˜¼ì êµ¬í˜„í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤</code>ë¥¼ ì°¸ê³ ë„ì„œë¡œ í™œìš©í•©ë‹ˆë‹¤. ì €ì‘ê¶Œì€ ë³¸ ì±…ì˜ ì €ì„œì—ê²Œ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</p>

<h3 id="ìŠ¤í”„ë§-ë¶€íŠ¸-ì•Œì•„ê°€ê¸°">ìŠ¤í”„ë§ ë¶€íŠ¸ ì•Œì•„ê°€ê¸°</h3>

<p>ë¨¼ì € IntelliJ, Java 11, Gradleì„ ì„¤ì¹˜í•˜ê³  í”„ë¡œì íŠ¸ë¥¼ Gradleë¡œ ìƒì„±í–ˆì„ ë•Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤. ì´ ì±…ì—ì„œ ë‚˜ì˜¨ ëª‡ê°€ì§€ ì»¨ë²¤ì…˜ì…ë‹ˆë‹¤.</p>

<ol>
  <li>íŒ¨í‚¤ì§€ëª…ì€ ì›¹ì‚¬ì´íŠ¸ì˜ ì—­ìˆœìœ¼ë¡œ í•©ë‹ˆë‹¤.
    <ul>
      <li>ex) jungwoo.java.com -&gt; com.java.jungwoo</li>
    </ul>
  </li>
  <li>í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ê¸°ì¡´ íŒ¨í‚¤ì§€ì™€ êµ¬ì„±ì„ ê°™ê²Œ í•©ë‹ˆë‹¤
    <ul>
      <li>ex) ì‹¤ì œ í´ë˜ìŠ¤ ëª…ì´ jungwoo.java.comì˜ Functionì´ë©´ test íŒ¨í‚¤ì§€ì—ì„œë„ jungwoo.java.comì˜ FunctionTestë¡œ ì •ì˜í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
</ol>

<p>build.gradleì˜ êµ¬ì„±ìš”ì†Œë„ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<ol>
  <li>plugins : ìŠ¤í”„ë§ ë¶€íŠ¸ ì˜ì¡´ì„± ê´€ë¦¬ì™€ ì–´í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§•ì„ ë„ì™€ì£¼ëŠ” ë„êµ¬.</li>
  <li>group : í”„ë¡œì íŠ¸ë¥¼ ì •ì˜í•˜ëŠ” ê³ ìœ  ì‹ë³„ì ì •ë³´</li>
  <li>version : í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ë²„ì „(snapshotì´ ë¶™ì„ ê²½ìš° ê°œë°œì´ ì™„ë£Œë˜ì§€ ì•Šì€ ìƒí™©)</li>
  <li>sourceCompatibility<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> : ì»´íŒŒì¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” JDK ë²„ì „ì…ë‹ˆë‹¤.
    <ul>
      <li>ì‹¤ìˆ˜ë¡œ ë” ë†’ì€ ë²„ì „ì˜ java ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">targetCompatibility</code>ë¼ëŠ” ê¸°ëŠ¥ë„ ìˆìŠµë‹ˆë‹¤.(ì§ì ‘ ì¶”ê°€í•´ì•¼í•¨)
        <ul>
          <li>ìƒì„±ëœ í´ë˜ìŠ¤ íŒŒì¼ì˜ ë²„ì „ì„ ì œì–´í•©ë‹ˆë‹¤.</li>
          <li>í”„ë¡œê·¸ë¨ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” <code class="language-plaintext highlighter-rouge">ê°€ì¥ ë‚®ì€ java ë²„ì „</code>ì„ ë§í•©ë‹ˆë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>rerpositories<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup> : í”„ë¡œì íŠ¸ì˜ ì €ì¥ì†Œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.<br />
 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì–´ë–¤ ì›ê²© ì €ì¥ì†Œì—ì„œ ë°›ì„ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.
    <ul>
      <li>mavenCentral : ê¸°ì¡´ì— ë§ì´ ì“°ì¸ ì €ì¥ì†Œ, ì§ì ‘ ë§Œë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—…ë¡œë“œ ì–´ë ¤ì›€</li>
      <li>jcenter : mavenCentralì˜ ë‹¨ì ì„ ê°œì„ í•œ ì €ì¥ì†Œ</li>
    </ul>
  </li>
  <li>test : Test taskë¥¼ ì¶”ê°€, ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” JUnitì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">useJUnitPlatform()</code>ì„ ì‚¬ìš©í•œë‹¤.</li>
  <li>dependencies : í”„ë¡œì íŠ¸ ê°œë°œì— í•„ìš”í•œ ì˜ì¡´ì„±ë“¤ì„ ì„ ì–¸í•˜ëŠ” ê³³.
    <ul>
      <li>ì£¼ì˜í•  ì ì€ ì–´ë– í•œ ë²„ì „ì— ì¢…ì†ì ì¸ ì˜ì¡´ì„±ì„ ì„ ì–¸í•˜ëŠ” ê²ƒì„ ì§€ì–‘í•´ì•¼ í•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>implementation<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup> : ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìˆ˜ì •ì‹œ ë³¸ ëª¨ë“ˆê¹Œì§€ë§Œ ë¦¬ë¹Œë“œí•œë‹¤.
    <ul>
      <li>testImplementation : í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜í–‰í•  ë•Œë§Œ ì ìš©</li>
      <li>runtimeOnly : runtime ì‹œì—ë§Œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¼ ê²½ìš°</li>
      <li>compileOnly : ì»´íŒŒì¼ ì‹œì—ë§Œ ë¹Œë“œí•˜ê³  ë¹Œë“œ ê²°ê³¼ë¬¼ì—ëŠ” í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
      <li>annotationProcessor : annotation processor ëª…ì‹œí•œë‹¤.</li>
    </ul>
  </li>
</ol>

<p>implementation ì¶”ê°€ ì„¤ëª… :<br />
A &lt;- B &lt;- C ì˜ ì˜ì¡´ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ê³  ê°€ì •í•´ë³´ì.</p>

<ul>
  <li>compileì€ A ìˆ˜ì •ì‹œ B,C ë“± ì˜ì¡´ ì˜¤ë¸Œì íŠ¸ê°€ ëª¨ë‘ ë‹¤ì‹œ ë¹Œë“œë˜ì–´ì•¼ í•œë‹¤.</li>
  <li>implementationì€ A ìˆ˜ì •ì‹œ Bë§Œ ë‹¤ì‹œ ë¹Œë“œí•˜ë©´ ëœë‹¤.</li>
</ul>

<p>gradle 3.0 ì´ìƒë¶€í„°ëŠ” compile ì‚¬ìš©ì„ ê¶Œí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>

<p>artifactë€?<br />
springì—ì„œëŠ” ë³´í†µ <code class="language-plaintext highlighter-rouge">jar</code>íŒŒì¼, ë¹Œë“œ ê²°ê³¼ë¬¼ì„ ë§í•œë‹¤.</p>

<p>jar íŒŒì¼ì´ë€?<br />
<code class="language-plaintext highlighter-rouge">Java Archive</code>ë¥¼ ëœ»í•œë‹¤. ì—¬ëŸ¬ê°œì˜ ìë°” í´ë˜ìŠ¤ íŒŒì¼ê³¼ í´ë˜ìŠ¤ë“¤ì´ ì´ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤(í…ìŠ¤íŠ¸, ê·¸ë¦¼) ë° ë©”íƒ€ë°ì´í„°(ë°ì´í„°ë¥¼ ì„¤ëª…í•˜ëŠ” ë°ì´í„°)ë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ ëª¨ì•„ ìë°” í”Œë«í¼ì—ì„œ <code class="language-plaintext highlighter-rouge">ì‘ìš© ì†Œí”„íŠ¸ì›¨ì–´</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">ë¼ì´ë¸ŒëŸ¬ë¦¬</code>ë¥¼ <code class="language-plaintext highlighter-rouge">ë°°í¬í•˜ê¸° ìœ„í•œ</code> ì†Œí”„íŠ¸ì›¨ì–´ <code class="language-plaintext highlighter-rouge">íŒ¨í‚¤ì§€ íŒŒì¼ í¬ë§·</code>ì´ë‹¤. - wiki ì •ì˜</p>

<p>Maven ì €ì¥ì†Œ<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup>ëŠ” ì¼ë°˜ì ìœ¼ë¡œ maven artifactsê°€ ì €ì¥ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê³µê°„ì´ë‹¤.<br />
í•œë²ˆ maven artifactê°€ maven ì €ì¥ì†Œì— ë“±ë¡ë˜ë©´ ë‹¤ë¥¸ maven í”„ë¡œì ì—ì„œ ê²€ìƒ‰, í¬í•¨ë  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/img/230112/maven.jpg" alt="img3" /></p>

<p>org.springframework.boot ë€?<br />
ìœ„ì—ì„œ ì–¸ê¸‰í•œ ìŠ¤í”„ë§ë¶€íŠ¸ì˜ groupIdì´ë‹¤.</p>
<ul>
  <li>boot-starterë€? : ë¼ì´ë¸ŒëŸ¬ë¦¬ê°„ ì˜ì¡´ì„±, ë²„ì „ ì¡°í•©ì„ ë¯¸ë¦¬ ì •ì˜í•´ì„œ ì œê³µ
    <ul>
      <li>ëª¨ë“  ê²½ìš°ì— ëŒ€í•œ ì™„ë²½í•œ ì¡°í•©ì€ ì•„ë‹ˆì§€ë§Œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í•œì—ì„œëŠ” ì•ˆì •ì ì¸ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="í•œê¸€-ê¹¨ì§-í˜„ìƒ">í•œê¸€ ê¹¨ì§ í˜„ìƒ</h3>
<p>ì²˜ìŒìœ¼ë¡œ ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ë©´ í•œê¸€ì´ ì œëŒ€ë¡œ ì¶œë ¥ë˜ì§€ ì•ŠëŠ” í˜„ìƒì´ ë‚˜íƒ€ë‚œë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Help -&gt; Edit Custom VM Options
vmoptioníŒŒì¼ì— 
-----------------------
-Dfile.encoding=UTF-8
-Dconsole.encoding=UTF-8
-----------------------
ì„ ì¶”ê°€í•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.
</code></pre></div></div>
<h3 id="ì–´ë…¸í…Œì´ì…˜-ì •ë¦¬">ì–´ë…¸í…Œì´ì…˜ ì •ë¦¬</h3>
<p>@RestController</p>
<ul>
  <li>ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.</li>
  <li>@ResponseBodyë¥¼ ê° ë©”ì†Œë“œë§ˆë‹¤ ì„ ì–¸í–ˆë˜ ê²ƒì„ í•œë²ˆì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.</li>
</ul>

<p>@GetMapping</p>
<ul>
  <li>HTTP Methodì¸ Get ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆëŠ” APIë¡œ ë§Œë“¤ì–´ ì¤€ë‹¤.</li>
  <li>ë ˆê±°ì‹œì˜ @RequestMapping(method = RequestMethod.GET)ì˜ ê¸°ëŠ¥ì„ ìƒê°í•˜ë©´ ëœë‹¤.</li>
</ul>

<p>@ExtendWith(SpringExtension.class)</p>
<ul>
  <li>í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ JUnitì— ë‚´ì¥ëœ ì‹¤í–‰ì ì™¸ì— ë‹¤ë¥¸ ì‹¤í–‰ìë¥¼ ì‹¤í–‰</li>
  <li>ì—¬ê¸°ì„œëŠ” SpringExtension ìŠ¤í”„ë§ ì‹¤í–‰ìë¥¼ ì‚¬ìš©</li>
  <li>ìŠ¤í”„ë§ ë¶€íŠ¸ í…ŒìŠ¤íŠ¸ì™€ JUnitì‚¬ì´ì˜ ì—°ê²°ì ì—­í• </li>
</ul>

<p>@WebMvcTest</p>
<ul>
  <li>ì—¬ëŸ¬ ìŠ¤í”„ë§ í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ ì¤‘ Webì— ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜</li>
  <li>@Controller, @ControllerAdviceë¥¼ ì‚¬ìš©ê°€ëŠ¥</li>
  <li>@Service, @Component, @Repositoryë“±ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤</li>
</ul>

<p>@Autowired</p>
<ul>
  <li>ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” Beanì„ ì£¼ì…ë°›ëŠ”ë‹¤.</li>
</ul>

<p>MockMvc</p>
<ul>
  <li>Mock(ê°€ì§œì˜), ì›¹ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ë•Œ ì‚¬ìš©í•œë‹¤.</li>
  <li>ìŠ¤í”„ë§ MVC í…ŒìŠ¤íŠ¸ì˜ ì‹œì‘ì </li>
  <li>ì´ í´ë˜ìŠ¤ë¡œ HTTP GET, POSTë“± API í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>

<p>mvc.perform(get(â€œ/helloâ€))</p>
<ul>
  <li>MockMvcë¥¼ í†µí•´ /hello ì£¼ì†Œë¡œ GET ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</li>
  <li>
    <p>ì²´ì´ë‹ì´ ì§€ì›ë˜ì–´ ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ê²€ì¦ ê¸°ëŠ¥ì„ ì´ì–´ì„œ ì„ ì–¸ ê°€ëŠ¥í•˜ë‹¤.</p>
  </li>
  <li>andExpect(status().isOk())
    <ul>
      <li>mvc.performì˜ ê²°ê³¼ë¥¼ ê²€ì¦í•œë‹¤.</li>
      <li>HTTP Headerì˜ statusë¥¼ ê²€ì¦í•œë‹¤.</li>
      <li>200, 404, 500 ë“±ì˜ ìƒíƒœë¥¼ ê²€ì¦</li>
    </ul>
  </li>
  <li>andExpect(content().string(hello))
    <ul>
      <li>mvc.performì˜ ê²°ê³¼ë¥¼ ê²€ì¦</li>
      <li>ì‘ë‹µ ë³¸ë¬¸ì˜ ë‚´ìš©ì„ ê²€ì¦í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<p>@Getter</p>
<ul>
  <li>ì„ ì–¸ëœ ëª¨ë“  í•„ë“œì˜ get ë©”ì†Œë“œë¥¼ ìƒì„±</li>
</ul>

<p>@RequiredArgsConstructor</p>
<ul>
  <li>ì„ ì–¸ëœ ëª¨ë“  final í•„ë“œê°€ í¬í•¨ëœ ìƒì„±ìë¥¼ ìƒì„±</li>
  <li>finalì´ ì—†ëŠ” í•„ë“œëŠ” ìƒì„±ìì— í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>
</ul>

<p>assertThat</p>
<ul>
  <li>assertJë¼ëŠ” í…ŒìŠ¤íŠ¸ ê²€ì • ë¼ì´ë¸ŒëŸ¬ë¦¬</li>
</ul>

<p>isEqualTo</p>
<ul>
  <li>assertJì˜ ë™ë“± ë¹„êµ ë©”ì†Œë“œ</li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>https://dlee0129.tistory.com/265Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>https://pgnt.tistory.com/134Â <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3" role="doc-endnote">
      <p>https://cantcoding.tistory.com/59Â <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4" role="doc-endnote">
      <p>https://www.cloudrepo.io/articles/what-is-a-maven-repository.html#overviewÂ <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[ìŠ¤í”„ë§ ë¶€íŠ¸ ì‹œì‘í•˜ê¸°]]></summary></entry><entry><title type="html">Spring JPA 4ì¼ì°¨</title><link href="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2022/12/19/springjpa4.html" rel="alternate" type="text/html" title="Spring JPA 4ì¼ì°¨" /><published>2022-12-19T00:00:00+00:00</published><updated>2022-12-19T00:00:00+00:00</updated><id>https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2022/12/19/springjpa4</id><content type="html" xml:base="https://parkjoungwoo.github.io/jekyll-theme-yat/spring/2022/12/19/springjpa4.html"><![CDATA[<h1 id="jpa-4ì¼ì°¨--ì—”í‹°í‹°-ë§¤í•‘">JPA 4ì¼ì°¨ : ì—”í‹°í‹° ë§¤í•‘</h1>

<h2 id="ì–´ë…¸í…Œì´ì…˜">ì–´ë…¸í…Œì´ì…˜</h2>

<table>
  <thead>
    <tr>
      <th>ë§¤í•‘ì¢…ë¥˜</th>
      <th>ì–´ë…¸í…Œì´ì…˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ê°ì²´ì™€ í…Œì´ë¸”</td>
      <td>@Entity, @Table</td>
    </tr>
    <tr>
      <td>í•„ë“œì™€ ì»¬ëŸ¼</td>
      <td>@Column</td>
    </tr>
    <tr>
      <td>ê¸°ë³¸í‚¤</td>
      <td>@Id</td>
    </tr>
    <tr>
      <td>ì—°ê´€ ê´€ê³„</td>
      <td>@ManyToOne, @JoinColumn</td>
    </tr>
  </tbody>
</table>

<h2 id="entity">@Entity</h2>
<p>@Entityê°€ ë¶™ì€ í´ë˜ìŠ¤ëŠ” JPAê°€ ê´€ë¦¬í•œë‹¤.</p>

<ul>
  <li>ì£¼ì˜
    <ul>
      <li>ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜</li>
      <li>finalí´ë˜ìŠ¤, enum, interface, innerí´ë˜ìŠ¤ X</li>
      <li>ì €ì¥í•  í•„ë“œì— final ì‚¬ìš© X</li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MBR"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span>
<span class="o">-&gt;</span> <span class="n">queryê°€</span> <span class="nc">MBRë¡œ</span> <span class="n">ë‚˜ê°„ë‹¤</span><span class="o">.</span>
</code></pre></div></div>

<h3 id="ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ-ìë™-ìƒì„±">ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±</h3>
<p>ğŸ¤”Hibernate ê¸°ì¤€ persistence.xmlì— ì¶”ê°€</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;property name="hibernate.hdm2ddl.auto" value="create"&gt;
</code></pre></div></div>

<ul>
  <li>DDLì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ìë™ ìƒì„±</li>
  <li>í…Œì´ë¸” ì¤‘ì‹¬ -&gt; ê°ì²´ ì¤‘ì‹¬</li>
  <li>ë°ì´í„°ë² ì´ìŠ¤ dialectë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì— ë§ëŠ” DDL ìƒì„±</li>
  <li>ê°œë°œ ë‹¨ê³„, ê°œë°œ ì¥ë¹„ì—ì„œë§Œ ì‚¬ìš©(ìš´ì˜ì—ëŠ” ì‚¬ìš©X)</li>
</ul>

<table>
  <thead>
    <tr>
      <th>ì˜µì…˜</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>create</td>
      <td>ê¸°ì¡´í…Œì´ë¸” ì‚­ì œ í›„ ë‹¤ì‹œ ìƒì„±</td>
    </tr>
    <tr>
      <td>create-drop</td>
      <td>createì™€ ê°™ìœ¼ë‚˜ ì¢…ë£Œì‹œì ì— drop</td>
    </tr>
    <tr>
      <td>update</td>
      <td>ë³€ê²½ë¶„ë§Œ ë°˜ì˜</td>
    </tr>
    <tr>
      <td>validate</td>
      <td>ì—”í‹°í‹°ì™€ í…Œì´ë¸”ì´ ì •ìƒ ë§¤í•‘ë˜ì—ˆëŠ”ì§€ í™•ì¸</td>
    </tr>
    <tr>
      <td>none</td>
      <td>ì‚¬ìš©í•˜ì§€ ì•ŠìŒ</td>
    </tr>
  </tbody>
</table>

<p>â­â­â­ ìš´ì˜ ì¥ë¹„ì—ëŠ” create, create-drop, updateë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.</p>

<ul>
  <li>ì´ˆê¸° ë‹¨ê³„ : create, update</li>
  <li>í…ŒìŠ¤íŠ¸ ì„œë²„ : update, validate</li>
  <li>ìŠ¤í…Œì´ì§•, ìš´ì˜ : validate, none</li>
</ul>

<h2 id="column">@Column</h2>

<table>
  <thead>
    <tr>
      <th>ì†ì„±</th>
      <th>ì„¤ëª…</th>
      <th>ê¸°ë³¸ê°’</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>name</td>
      <td>í•„ë“œì™€ ë§¤í•‘í•  í…Œì´ë¸”ì˜ ì»¬ëŸ¼ì´ë¦„</td>
      <td>ê°ì²´ì˜ í•„ë“œ ì´ë¦„</td>
    </tr>
    <tr>
      <td>insertable, updatable</td>
      <td>ë“±ë¡,ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€</td>
      <td>TRUE</td>
    </tr>
    <tr>
      <td>nullable(DDL)</td>
      <td>null ê°’ì˜ í—ˆìš© ì—¬ë¶€ë¥¼ ì„¤ì • false - not null ì œì•½|</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>unique(DDL)</td>
      <td>@Tableì˜ uniqueConstraintì™€ ê°™ì§€ë§Œ í•œ ì»¬ëŸ¼ì— ê°„ë‹¨í•œ ì œì•½ì¡°ê±´|</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>columnDefinition</td>
      <td>ë°ì´í„° ë² ì´ìŠ¤ ì»¬ëŸ¼ ì •ë³´</td>
      <td>í•„ë“œì˜ ìë°” íƒ€ì…ê³¼ dialect ì •ë³´ë¥¼ ì‚¬ìš©</td>
    </tr>
    <tr>
      <td>length(DDL)</td>
      <td>ë¬¸ì ê¸¸ì´ ì œì•½(String Only)</td>
      <td>255</td>
    </tr>
    <tr>
      <td>precision, scale(DDL)</td>
      <td>BigDecimal íƒ€ì…ì—ì„œ ì‚¬ìš©,</td>
      <td>precision=19,</td>
    </tr>
    <tr>
      <td>value</td>
      <td>EnumType.ORDINAL : enum ìˆœì„œë¥¼ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥, EnumType.STRING : enumì´ë¦„ì„ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥</td>
      <td>EnumType.ORDINAL</td>
    </tr>
  </tbody>
</table>

<p>Enumì—ì„œ ORDINALì€ ë˜ë„ë¡ì´ë©´ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤!</p>

<p>ì´ìœ  : ì˜›ë‚  ë°ì´í„°ëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë° Enumì— ìƒˆë¡œìš´ ë°ì´í„°ê°€ ì¶”ê°€ë˜ë©´ ê¸°ë³¸ê°’ì´ ë‹¬ë¼ì§„ë‹¤.</p>

<p>í•´ê²° : ê±°ì˜ ë¬´ì¡°ê±´ Enum.Type.STRINGì„ ì‚¬ìš©í•œë‹¤.</p>

<h1 id="ê¸°ë³¸-í‚¤-ë§¤í•‘">ê¸°ë³¸ í‚¤ ë§¤í•‘</h1>

<p>ê¸°ë³¸ í‚¤ ë§¤í•‘ ë°©ë²•</p>

<ul>
  <li>ì§ì ‘ í• ë‹¹ : @Id ì‚¬ìš©</li>
  <li>ìë™ ìƒì„±(@GeneratedValue)
    <ul>
      <li>IDENTITY : ë°ì´í„°ë² ì´ìŠ¤ì— ìœ„ì„, MYSQL</li>
      <li>SEQUENCE : ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ ì˜¤ë¸Œì íŠ¸ ì‚¬ìš©, Oracle
        <ul>
          <li>@SequenceGenerator í•„ìš”</li>
        </ul>
      </li>
      <li>TABLE : í‚¤ ìƒì„±ìš© í…Œì´ë¸” ì‚¬ìš©, ëª¨ë“  DBì—ì„œ ì‚¬ìš©
        <ul>
          <li>@TableGenerator í•„ìš”</li>
        </ul>
      </li>
      <li>AUTO : dialectì— ë”°ë¼ ìë™ ì§€ì •, ê¸°ë³¸ê°’</li>
    </ul>
  </li>
</ul>

<p>IDENTITY ì „ëµì˜ íŠ¹ì§• : commit ì‹œì ì— queryê°€ ì „ì†¡</p>

<p>SEQUENCE ì „ëµì˜ íŠ¹ì§• : ë³¸ë¬¸ì˜ id ê°’ì„ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ê°’ì„ ì €ì¥, persistì‹œì ì—ì„œ dbì—ì„œ ê°’ì„ ê°€ì ¸ì˜¤ê³  commit ì‹œì ì—ì„œ ê°’ì„ ë„£ëŠ”ë‹¤.</p>]]></content><author><name>ë°•ì •ìš°</name></author><category term="spring" /><category term="spring" /><summary type="html"><![CDATA[JPA 4ì¼ì°¨ : ì—”í‹°í‹° ë§¤í•‘]]></summary></entry></feed>